import { tags } from "typia";

/**
 * An immutable record of a coding test result for an applicant's submission in
 * the ATS. One record represents one evaluation snapshot, whether automatic
 * (system), manual (reviewer), or override (admin). Records point to both
 * submission and coding test, and include evaluation metadata, scoring,
 * reviewer flags, ranking, and finalized timestamps. Result payloads for
 * automatic scores/stats are included in result_json, and result records are
 * never updated but only appended as new evaluation events for test result
 * audits.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type IAtsRecruitmentCodingTestResult = {
  /** Primary key for the coding test result record (UUID). */
  id: string & tags.Format<"uuid">;

  /** Reference to the coding test submission that was evaluated (UUID, FK). */
  ats_recruitment_coding_test_submission_id: string & tags.Format<"uuid">;

  /** Reference to the coding test instance this result belongs to (UUID, FK). */
  ats_recruitment_coding_test_id: string & tags.Format<"uuid">;

  /**
   * String label of the evaluation method: 'auto', 'manual', 'external',
   * 'rerun', 'admin_override' (see ATS documentation for allowed values).
   * Required, must match business logic.
   */
  evaluation_method: string;

  /** Normalized or raw score assigned by evaluation system. Required. */
  score: number;

  /**
   * Maximum achievable score for this test/submission. Used for
   * normalization, reporting, and ranking.
   */
  maximum_score: number;

  /**
   * If true, result was flagged by system or reviewer as plagiarism/error.
   * Used for reporting, denial, or compliance.
   */
  plagiarism_flag: boolean;

  /**
   * Ranking percentile for this candidate in this test cohort (0-100, higher
   * is better). Required.
   */
  ranking_percentile: number;

  /**
   * (Optional, nullable) JSON-serialized detail of evaluation result. Used
   * for downstream analysis, performance reporting, or error trace.
   * Nullable.
   */
  result_json?: string | null | undefined;

  /** ISO8601 UTC timestamp when evaluation was finalized and snapshot created. */
  finalized_at: string & tags.Format<"date-time">;

  /** ISO8601 UTC timestamp when the result record was created. */
  created_at: string & tags.Format<"date-time">;

  /** ISO8601 UTC timestamp when the result record was last updated. */
  updated_at: string & tags.Format<"date-time">;

  /**
   * Soft delete timestamp. Null if not deleted; set when purged for
   * GDPR/compliance reasons. Nullable.
   */
  deleted_at?: (string & tags.Format<"date-time">) | null | undefined;
};
export namespace IAtsRecruitmentCodingTestResult {
  /**
   * Filter/search conditions for listing coding test result records
   * associated with coding test or submission. Used by technical reviewers
   * and administrators to analyze/test result pipelines, including
   * score/range, evaluation method, flags, ranking, and pagination controls.
   */
  export type IRequest = {
    /**
     * Unique identifier of the parent coding test for which to list
     * results.
     */
    codingTestId: string & tags.Format<"uuid">;

    /** Optional: restrict to results for a given coding test submission. */
    submissionId?: (string & tags.Format<"uuid">) | undefined;

    /**
     * Optional: filter by evaluation method
     * (auto/manual/external/admin_override).
     */
    evaluation_method?: string | undefined;

    /** Optional: restrict to results flagged/unflagged for plagiarism. */
    plagiarism_flag?: boolean | undefined;

    /** Optional: restrict to results with score >= this value. */
    score_gte?: number | undefined;

    /** Optional: restrict to results with score <= this value. */
    score_lte?: number | undefined;

    /** Optional: restrict to results with ranking_percentile >= this value. */
    ranking_percentile_gte?: number | undefined;

    /** Optional: restrict to results with ranking_percentile <= this value. */
    ranking_percentile_lte?: number | undefined;

    /** Optional: page number for pagination, default is 1. */
    page?: (number & tags.Type<"int32">) | undefined;

    /** Optional: page size for pagination, typically 20/50/100. */
    limit?: (number & tags.Type<"int32">) | undefined;

    /**
     * Optional: sort field and direction, e.g. '-score', 'score',
     * '-finalized_at'.
     */
    sort?: string | undefined;
  };

  /**
   * Payload for creating a new coding test result record. References the
   * submission, coding test, and scores per evaluation method. Follows audit
   * requirements for test assessment traceability.
   */
  export type ICreate = {
    /**
     * Unique identifier referencing the related coding test submission.
     * Must match an ID present in ats_recruitment_coding_test_submissions
     * for analytics and traceability.
     */
    ats_recruitment_coding_test_submission_id: string & tags.Format<"uuid">;

    /**
     * Unique identifier referencing the parent coding test instance. Used
     * for reporting, grouping results, and cross-reference in audits.
     */
    ats_recruitment_coding_test_id: string & tags.Format<"uuid">;

    /**
     * Method of result evaluation (e.g., 'auto', 'manual', 'external',
     * 'rerun', 'admin_override'). Ensures clarity in tracking how scores
     * were assigned.
     */
    evaluation_method: string;

    /**
     * Numeric score achieved by the applicant in this test attempt. Must be
     * between 0 and the value given in maximum_score.
     */
    score: number;

    /**
     * Maximum possible score for the test; used for normalization and
     * analytic reporting.
     */
    maximum_score: number;

    /**
     * True if the submission is flagged as abnormal or plagiarized (usually
     * by AI or a human reviewer check). Used for fraud prevention and
     * audit.
     */
    plagiarism_flag: boolean;

    /**
     * Applicant's ranking percentile for this test (0~100, where 100=top
     * performer). Used for analytics and leaderboard reporting.
     */
    ranking_percentile: number;

    /**
     * Serialized (JSON string) automated evaluation details (e.g.,
     * testcases, logs, error messages). Optional.
     */
    result_json?: string | undefined;

    /**
     * Timestamp when this result was finalized and recorded for audit
     * compliance.
     */
    finalized_at: string & tags.Format<"date-time">;
  };

  /**
   * Patch/partial update schema for a coding test result record. Only allowed
   * fields may be changed; primary relationships remain immutable.
   */
  export type IUpdate = {
    /**
     * (Optional) Updated evaluation method; must remain consistent with
     * system's allowed values.
     */
    evaluation_method?: string | undefined;

    /** (Optional) New/recalculated numeric score for the submission. */
    score?: number | undefined;

    /** (Optional) New or adjusted maximum score for normalization. */
    maximum_score?: number | undefined;

    /** (Optional) Update on plagiarism/irregularity status. */
    plagiarism_flag?: boolean | undefined;

    /**
     * (Optional) New percentile ranking reflecting re-evaluation or updated
     * group statistics.
     */
    ranking_percentile?: number | undefined;

    /**
     * (Optional) (Possibly corrected) serialized result JSON or error
     * context.
     */
    result_json?: string | undefined;

    /**
     * (Optional) Update for the timestamp marking when the result was
     * finalized or re-finalized.
     */
    finalized_at?: (string & tags.Format<"date-time">) | undefined;
  };
}

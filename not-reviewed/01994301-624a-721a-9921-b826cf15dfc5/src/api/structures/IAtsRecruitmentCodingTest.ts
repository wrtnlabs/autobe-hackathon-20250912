import { tags } from "typia";

/**
 * Represents individual coding test instances assigned to applications. Tracks
 * type (internal or external), scheduling, delivery channel, and test meta.
 * Linked to application, applicant, and HR/recruiter.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type IAtsRecruitmentCodingTest = {
  /** Primary Key. */
  id: string & tags.Format<"uuid">;

  /** Belonged application's ats_recruitment_applications.id */
  ats_recruitment_application_id: string & tags.Format<"uuid">;

  /** Belonged applicant's ats_recruitment_applicants.id */
  ats_recruitment_applicant_id: string & tags.Format<"uuid">;

  /**
   * Belonged HR recruiter who assigned/triggered this test.
   * ats_recruitment_hrrecruiters.id
   */
  ats_recruitment_hrrecruiter_id: string & tags.Format<"uuid">;

  /**
   * Provider type: 'internal' (platform written), or 3rd party like
   * 'programmers', 'codesignal'.
   */
  test_provider: string;

  /**
   * ID returned by external provider system, if external. Required for
   * callback. Use null if in-house.
   */
  test_external_id?: string | undefined;

  /**
   * Test access URL (if generated by external provider or for applicant's
   * direct access).
   */
  test_url?: string | undefined;

  /** Datetime when test is scheduled. */
  scheduled_at: string & tags.Format<"date-time">;

  /** Datetime when invitation/test was actually delivered to applicant. */
  delivered_at?: (string & tags.Format<"date-time">) | undefined;

  /**
   * Current delivery/test state. Example: 'scheduled', 'delivered',
   * 'in_progress', 'completed', 'failed', 'cancelled'.
   */
  status: string;

  /**
   * Last time applicant is allowed to take test (nullable for open-ended or
   * instant tests).
   */
  expiration_at?: (string & tags.Format<"date-time">) | undefined;

  /**
   * Timestamp when API callback received from external system (null if not
   * applicable).
   */
  callback_received_at?: (string & tags.Format<"date-time">) | undefined;

  /** Datetime test is definitively closed for submission. */
  closed_at?: (string & tags.Format<"date-time">) | undefined;

  /** Canonical creation timestamp. */
  created_at: string & tags.Format<"date-time">;

  /** Canonical update timestamp. */
  updated_at: string & tags.Format<"date-time">;

  /** Soft-delete. Set on logical delete for audit reasons. */
  deleted_at?: (string & tags.Format<"date-time">) | undefined;
};
export namespace IAtsRecruitmentCodingTest {
  /** Search/filter and pagination query for coding test assignments. */
  export type IRequest = {
    /** Current page for pagination. */
    page?: (number & tags.Type<"int32">) | undefined;

    /** Number of records per page. */
    limit?: (number & tags.Type<"int32">) | undefined;

    /** Filter by applicant UUID. */
    applicant_id?: (string & tags.Format<"uuid">) | undefined;

    /** Filter by job posting UUID. */
    job_posting_id?: (string & tags.Format<"uuid">) | undefined;

    /**
     * Current delivery/test state. Example: 'scheduled', 'delivered',
     * 'in_progress', 'completed', 'failed', 'cancelled'.
     */
    status?: string | undefined;

    /** Provider type: 'internal', 'programmers', 'codesignal', etc. */
    test_provider?: string | undefined;

    /** Filter: scheduled_at range start. */
    scheduled_at_start?: (string & tags.Format<"date-time">) | undefined;

    /** Filter: scheduled_at range end. */
    scheduled_at_end?: (string & tags.Format<"date-time">) | undefined;

    /** Field to order results by. */
    order_by?: string | undefined;

    /** Direction of ordering: asc or desc. */
    order_dir?: "asc" | "desc" | undefined;
  };

  /**
   * Input contract for creating a new coding test assignment in the
   * recruitment platform, intended for client-facing API operations.
   * Applicant, recruiter, and application associations are injected from the
   * authenticated server-side request context, not directly accepted from
   * client input. Only relevant scheduling and provider information should be
   * submitted here. Any business keys/IDs for actor associations must be
   * ignored if received from the client and set by server logic.
   */
  export type ICreate = {
    /**
     * Name/type of coding test provider. Example: 'internal',
     * 'programmers', 'codesignal'. Indicates whether the test is delivered
     * through the internal platform or an external service.
     */
    test_provider: string;

    /**
     * Optional external test ID if the test is managed by an external
     * provider. Used for callback correlation and provider
     * troubleshooting.
     */
    test_external_id?: string | null | undefined;

    /**
     * Optional direct URL to access the coding test if such is provided by
     * the test provider or used in the internal delivery workflow.
     */
    test_url?: string | null | undefined;

    /**
     * Datetime when the coding test is scheduled to be available to the
     * applicant. Must be in ISO8601 DateTime format (e.g.,
     * 2025-03-23T11:00:00Z).
     */
    scheduled_at: string & tags.Format<"date-time">;

    /**
     * Datetime after which the test is no longer available for access or
     * submission. ISO8601 format or null if open-ended.
     */
    expiration_at?: (string & tags.Format<"date-time">) | null | undefined;

    /**
     * Current status of the coding test assignment. Examples: 'scheduled',
     * 'delivered', 'in_progress', 'completed', 'failed', 'cancelled'. Used
     * to control progression and audit trail. Must match system's allowed
     * status values.
     */
    status: string;
  };

  /**
   * Input contract for updating an existing coding test record. All fields
   * are optional; use partial updates to patch scheduling, status, delivery,
   * or provider references as needed. Intended for system, HR, or provider
   * integrations to update progress and audit accurately.
   */
  export type IUpdate = {
    /**
     * (Optional) New datetime for when the coding test is scheduled to
     * start. ISO8601 format.
     */
    scheduled_at?: (string & tags.Format<"date-time">) | undefined;

    /**
     * (Optional) New expiration datetime for the test, after which the
     * applicant can no longer access or submit. Null if removing or
     * clearing the expiration.
     */
    expiration_at?: (string & tags.Format<"date-time">) | null | undefined;

    /**
     * (Optional) Timestamp for when the invitation/test was actually
     * delivered to the applicant. Used to track delivery events, may be set
     * by system.
     */
    delivered_at?: (string & tags.Format<"date-time">) | null | undefined;

    /**
     * (Optional) Timestamp for when a callback/response was received from
     * an external coding test provider. Used for synchronizing state on
     * integration events.
     */
    callback_received_at?:
      | (string & tags.Format<"date-time">)
      | null
      | undefined;

    /**
     * (Optional) Datetime when the test is definitively closed for
     * submission. Used in audit reporting and business process
     * enforcement.
     */
    closed_at?: (string & tags.Format<"date-time">) | null | undefined;

    /**
     * (Optional) New status value for the coding test assignment. Ex:
     * 'delivered', 'in_progress', 'completed', 'failed', 'cancelled'. Must
     * be in allowed status set.
     */
    status?: string | undefined;

    /**
     * (Optional) Update to the test URL (internal or external) for
     * applicant access.
     */
    test_url?: string | null | undefined;

    /**
     * (Optional) Update to the external test provider's unique test ID for
     * this assignment.
     */
    test_external_id?: string | null | undefined;
  };
}

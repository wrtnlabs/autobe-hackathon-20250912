/// LLM jobs represent individual processing tasks queued or executed for
/// political news data. They track the job status, parameters, and
/// processing flags. This model supports the management and monitoring of
/// asynchronous LLM post-processing tasks such as generating summaries and
/// analysis.
///
/// @namespace Processing
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model political_news_crawler_llm_jobs {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id
  
  /// The source channel from which the raw news data originated, referencing
  /// political_news_crawler_crawl_sources.id.
  crawl_source_id String
  
  /// Processing status of the job, e.g., 'pending', 'running', 'completed',
  /// 'failed'.
  status String
  
  /// JSON string of parameters or prompts used for this LLM job.
  parameters String
  
  /// Job creation timestamp.
  created_at DateTime
  
  /// Job last update timestamp.
  updated_at DateTime
  
  /// Soft delete timestamp, null if not deleted.
  deleted_at DateTime?
  
  //----
  // RELATIONS
  //----
  crawlSource political_news_crawler_crawl_sources @relation(fields: [crawl_source_id], references: [id], onDelete: Cascade)
  
  political_news_crawler_processed_content political_news_crawler_processed_content[]
  political_news_crawler_llm_results political_news_crawler_llm_results[]
  political_news_crawler_processing_metadata political_news_crawler_processing_metadata[]
  
  @@index([crawl_source_id, status, created_at], map: "political_news_crawler_llm_jobs_crawl_source_id_status_12346833")
}

/// LLM results store the output content generated by LLM jobs, including
/// summaries, highlights, and analyses. This model links back to the
/// originating LLM job and preserves output details for retrieval and audit
/// purposes.
///
/// @namespace Processing
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model political_news_crawler_llm_results {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id
  
  /// Associated LLM job's political_news_crawler_llm_jobs.id.
  llm_job_id String
  
  /// Type of generated content, e.g., 'summary', 'highlight', 'analysis'.
  content_type String
  
  /// Generated content text by the LLM.
  content_text String
  
  /// Timestamp when the output was created.
  created_at DateTime
  
  /// Timestamp when the output was last updated.
  updated_at DateTime
  
  /// Soft delete timestamp, null if not deleted.
  deleted_at DateTime?
  
  //----
  // RELATIONS
  //----
  llmJob political_news_crawler_llm_jobs @relation(fields: [llm_job_id], references: [id], onDelete: Cascade)
  
  @@index([llm_job_id, content_type])
}

/// Metadata entries for LLM processing capturing auxiliary information
/// related to jobs or overall processing context. This table stores
/// additional attributes to support enhancements and auditability.
///
/// @namespace Processing
/// @author AutoBE - https://github.com/wrtnlabs/autobe
model political_news_crawler_processing_metadata {
  //----
  // COLUMNS
  //----
  /// Primary Key.
  id String @id
  
  /// Associated LLM job's political_news_crawler_llm_jobs.id.
  llm_job_id String
  
  /// Key name of the metadata attribute.
  metadata_key String
  
  /// Value of the metadata attribute.
  metadata_value String
  
  /// Metadata entry creation timestamp.
  created_at DateTime
  
  /// Metadata entry last update timestamp.
  updated_at DateTime
  
  /// Soft delete timestamp, null if not deleted.
  deleted_at DateTime?
  
  //----
  // RELATIONS
  //----
  llmJob political_news_crawler_llm_jobs @relation(fields: [llm_job_id], references: [id], onDelete: Cascade)
  
  @@index([llm_job_id, metadata_key], map: "political_news_crawler_processing_metadata_llm_job_id__f59c62c3")
}
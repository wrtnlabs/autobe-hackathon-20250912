{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"social_login_system_parameters","description":"System-wide configuration parameters for the SocialLogin service. This table stores key-value pairs representing configurable options that govern system behavior. These parameters are essential for operations and can be updated by administrators. It includes audit timestamps and supports soft deletion for safe cleanup.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"key","type":"string","nullable":false,"description":"Unique identifier for the system parameter."},{"name":"value","type":"string","nullable":false,"description":"Value associated with the system parameter key."},{"name":"description","type":"string","nullable":true,"description":"Detailed explanation of the system parameter's purpose and usage."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this system parameter was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this system parameter was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp marking soft deletion of this system parameter, if applicable."}],"uniqueIndexes":[{"fieldNames":["key"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","updated_at"]}],"ginIndexes":[]},{"name":"social_login_jose_keys","description":"Storage of JOSE (JSON Object Signing and Encryption) cryptographic keys used for securing tokens and communications in the SocialLogin service. Each key record includes metadata, public and private key material, key status, and usage contexts. This table is critical for token signing and verification workflows.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"kid","type":"string","nullable":false,"description":"Key ID - a unique identifier for the JOSE key."},{"name":"use","type":"string","nullable":true,"description":"Intended usage of the key (e.g., 'sig' for signature, 'enc' for encryption)."},{"name":"kty","type":"string","nullable":true,"description":"Key type (e.g., RSA, EC)."},{"name":"alg","type":"string","nullable":true,"description":"Algorithm associated with the key (e.g., RS256, ES256)."},{"name":"key_ops","type":"string","nullable":true,"description":"Key operations this key can perform, e.g., sign, verify."},{"name":"x5c","type":"string","nullable":true,"description":"X.509 certificate chain associated with the key in base64 encoding."},{"name":"n","type":"string","nullable":true,"description":"RSA public modulus."},{"name":"e","type":"string","nullable":true,"description":"RSA public exponent."},{"name":"d","type":"string","nullable":true,"description":"RSA private exponent."},{"name":"p","type":"string","nullable":true,"description":"RSA private prime p."},{"name":"q","type":"string","nullable":true,"description":"RSA private prime q."},{"name":"dp","type":"string","nullable":true,"description":"RSA exponent 1."},{"name":"dq","type":"string","nullable":true,"description":"RSA exponent 2."},{"name":"qi","type":"string","nullable":true,"description":"RSA coefficient."},{"name":"crv","type":"string","nullable":true,"description":"Elliptic curve used."},{"name":"x","type":"string","nullable":true,"description":"Elliptic curve x coordinate."},{"name":"y","type":"string","nullable":true,"description":"Elliptic curve y coordinate."},{"name":"private_key","type":"string","nullable":true,"description":"Private key material if stored separately."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this JOSE key record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this JOSE key record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp, marks when the key was logically removed."}],"uniqueIndexes":[{"fieldNames":["kid"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","updated_at"]}],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"social_login_guests","description":"Guest users for temporary session identification and minimal tracking within the social login system. Guests do not have permanent credentials or authentication but are distinguished by unique nicknames for ephemeral identification.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"nickname","type":"string","nullable":false,"description":"Guest user's temporary nickname used for display and identification."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last update timestamp."}],"uniqueIndexes":[{"fieldNames":["nickname"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"social_login_users","description":"Registered users authenticated via social login, requiring unique email and nickname. Users have password hash for authentication, status indicating lifecycle, and support soft deletion.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":false,"description":"Unique email address for user login and communication."},{"name":"nickname","type":"string","nullable":false,"description":"Unique display nickname for the user."},{"name":"password_hash","type":"string","nullable":false,"description":"Hashed password for user authentication."},{"name":"status","type":"string","nullable":false,"description":"Account lifecycle status, e.g., active, suspended, withdrawn."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last update timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft delete timestamp for logical deletion without physical removal."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["nickname"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]}],"ginIndexes":[]},{"name":"social_login_admins","description":"Administrator accounts with elevated privileges in the social login system. Admins have unique email and nickname, password hash for authentication, status lifecycle, and soft delete capability.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":false,"description":"Unique admin email address for authentication and notifications."},{"name":"nickname","type":"string","nullable":false,"description":"Admin's unique display nickname."},{"name":"password_hash","type":"string","nullable":false,"description":"Hashed password for admin authentication."},{"name":"status","type":"string","nullable":false,"description":"Account lifecycle status such as active, suspended, or disabled."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last update timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft delete timestamp to mark logical deletion."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["nickname"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]}],"ginIndexes":[]}]},{"filename":"schema-03-auth.prisma","namespace":"Auth","models":[{"name":"social_login_access_tokens","description":"Access tokens represent opaque credentials issued to users upon authentication as part of OAuth 2.0/OpenID Connect flows. Each token is linked to a user, OAuth client, and optionally an authorization code. Tokens have expiry and revocation status. This table is crucial for managing user sessions and API access authorization.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"social_login_user_id","type":"uuid","description":"Belonged user's {@link social_login_users.id}.","relation":{"name":"user","targetModel":"social_login_users"},"unique":false,"nullable":false},{"name":"social_login_oauth_client_id","type":"uuid","description":"OAuth client that requested this token {@link social_login_oauth_clients.id}.","relation":{"name":"oauthClient","targetModel":"social_login_oauth_clients"},"unique":false,"nullable":false},{"name":"social_login_authorization_code_id","type":"uuid","description":"Authorization code linked to this access token {@link social_login_authorization_codes.id}.","relation":{"name":"authorizationCode","targetModel":"social_login_authorization_codes"},"unique":true,"nullable":true}],"plainFields":[{"name":"token","type":"string","description":"Opaque access token string issued to the client for authentication.","nullable":false},{"name":"expires_at","type":"datetime","description":"Expiration date and time of the access token in ISO 8601 format.","nullable":false},{"name":"revoked","type":"boolean","description":"Flag indicating whether this access token has been revoked.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this access token was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this access token was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["token"],"unique":true}],"plainIndexes":[{"fieldNames":["social_login_user_id","expires_at"]}],"ginIndexes":[]},{"name":"social_login_refresh_tokens","description":"Refresh tokens allow renewing access tokens without re-authenticating the user. Each refresh token is linked to a user, OAuth client, and optionally an authorization code. Includes token string, expiration, revocation status, and timestamps. Supports secure OAuth 2.0 session extension.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"social_login_user_id","type":"uuid","description":"Belonged user's {@link social_login_users.id}.","relation":{"name":"user","targetModel":"social_login_users"},"unique":false,"nullable":false},{"name":"social_login_oauth_client_id","type":"uuid","description":"OAuth client that owns this refresh token {@link social_login_oauth_clients.id}.","relation":{"name":"oauthClient","targetModel":"social_login_oauth_clients"},"unique":false,"nullable":false},{"name":"social_login_authorization_code_id","type":"uuid","description":"Authorization code linked to this refresh token {@link social_login_authorization_codes.id}.","relation":{"name":"authorizationCode","targetModel":"social_login_authorization_codes"},"unique":true,"nullable":true}],"plainFields":[{"name":"token","type":"string","description":"Opaque refresh token string issued to the client.","nullable":false},{"name":"expires_at","type":"datetime","description":"Expiration datetime of the refresh token in ISO 8601 format.","nullable":false},{"name":"revoked","type":"boolean","description":"Flag indicating whether this refresh token is revoked.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this refresh token was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this refresh token was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["token"],"unique":true}],"plainIndexes":[{"fieldNames":["social_login_user_id","expires_at"]}],"ginIndexes":[]},{"name":"social_login_token_introspection","description":"Records each request to introspect access or refresh tokens for validation and auditing per OAuth 2.0 token introspection RFC. Tracks token active status, metadata, scope, and associated client and user identifiers to support operational monitoring and security audits.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"social_login_access_token_id","type":"uuid","description":"Referenced access token {@link social_login_access_tokens.id}.","relation":{"name":"accessToken","targetModel":"social_login_access_tokens"},"unique":false,"nullable":false},{"name":"social_login_refresh_token_id","type":"uuid","description":"Referenced refresh token {@link social_login_refresh_tokens.id}.","relation":{"name":"refreshToken","targetModel":"social_login_refresh_tokens"},"unique":false,"nullable":true}],"plainFields":[{"name":"active","type":"boolean","description":"Indicates if the token is currently active according to introspection.","nullable":false},{"name":"token_type","type":"string","description":"Denotes whether token is access_token or refresh_token.","nullable":false},{"name":"client_id","type":"string","description":"Identifier of the client requesting introspection.","nullable":true},{"name":"scope","type":"string","description":"Scope string of token.","nullable":true},{"name":"user_id","type":"string","description":"User identifier associated with token.","nullable":true},{"name":"iat","type":"datetime","description":"Issued at timestamp claim in the token.","nullable":true},{"name":"exp","type":"datetime","description":"Expiry timestamp claim in the token.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation time of this introspection record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update time of this introspection record.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["social_login_access_token_id"]}],"ginIndexes":[]},{"name":"social_login_token_revocation","description":"Tracks revocation events for access and refresh tokens marking them as invalidated due to logout, user action, or security issues. Maintains token blacklist for enforcing immediate access denial.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"social_login_access_token_id","type":"uuid","description":"Revoked access token reference {@link social_login_access_tokens.id}.","relation":{"name":"accessToken","targetModel":"social_login_access_tokens"},"unique":true,"nullable":false},{"name":"social_login_refresh_token_id","type":"uuid","description":"Revoked refresh token reference {@link social_login_refresh_tokens.id}.","relation":{"name":"refreshToken","targetModel":"social_login_refresh_tokens"},"unique":true,"nullable":true}],"plainFields":[{"name":"revoked_at","type":"datetime","description":"Datetime when revocation occurred.","nullable":false},{"name":"reason","type":"string","description":"Textual reason for token revocation, if provided.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this revocation record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this revocation record was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["revoked_at"]}],"ginIndexes":[]}]},{"filename":"schema-04-oauthclients.prisma","namespace":"OAuthClients","models":[{"name":"social_login_oauth_clients","description":"OAuth client registration information representing third-party applications authorized to interact with the social login service. Contains client identification, secret, redirect URIs, scope definitions, and management metadata for life cycle control. Supports registration, update, and status management for OAuth clients.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"client_id","type":"string","nullable":false,"description":"Unique client identifier (client_id) issued to third-party OAuth clients."},{"name":"client_secret","type":"string","nullable":false,"description":"Confidential client secret used for authenticating the OAuth client."},{"name":"client_name","type":"string","nullable":false,"description":"Human-readable name of the OAuth client."},{"name":"redirect_uris","type":"string","nullable":false,"description":"Comma-separated list of authorized redirect URIs for OAuth client callbacks."},{"name":"grant_types","type":"string","nullable":false,"description":"Allowed OAuth 2.0 grant types for this client (authorization_code, refresh_token, etc.)."},{"name":"response_types","type":"string","nullable":false,"description":"Supported OAuth 2.0 response types (code, token, id_token)."},{"name":"scope","type":"string","nullable":false,"description":"Space-separated list of scopes this client is allowed to request."},{"name":"token_endpoint_auth_method","type":"string","nullable":false,"description":"Client authentication method for token endpoint (client_secret_basic, none, private_key_jwt)."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the OAuth client registration was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the OAuth client registration was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp to mark the client as deleted without hard removal."}],"uniqueIndexes":[{"fieldNames":["client_id"],"unique":true}],"plainIndexes":[{"fieldNames":["client_name","created_at"]}],"ginIndexes":[{"fieldName":"client_name"}]},{"name":"social_login_oauth_authorizations","description":"Represents consents and authorizations granted by users or admins to OAuth clients for access scopes. This entity tracks which user authorized which client with which scopes and maintains revocation status and timestamps.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"oauth_client_id","type":"uuid","nullable":false,"description":"Authorized OAuth client's {@link social_login_oauth_clients.id}","relation":{"name":"oauthClient","targetModel":"social_login_oauth_clients"},"unique":false},{"name":"user_id","type":"uuid","nullable":false,"description":"User who granted authorization {@link social_login_users.id}","relation":{"name":"user","targetModel":"social_login_users"},"unique":false}],"plainFields":[{"name":"scope","type":"string","nullable":false,"description":"Space-separated list of scopes authorized by the user for the client."},{"name":"status","type":"string","nullable":false,"description":"Authorization status (active, revoked, expired)."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the authorization was granted."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the authorization was last updated."},{"name":"revoked_at","type":"datetime","nullable":true,"description":"Timestamp when the authorization was revoked, if applicable."}],"uniqueIndexes":[{"fieldNames":["oauth_client_id","user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["user_id","status"]}],"ginIndexes":[{"fieldName":"scope"}]},{"name":"social_login_oauth_scopes","description":"Defines OAuth scopes available in the social login system, specifying the scope name and description to control permissions that clients can request.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"scope_name","type":"string","nullable":false,"description":"Name of the OAuth scope (e.g., openid, email, profile)."},{"name":"description","type":"string","nullable":false,"description":"Detailed description of the scope purpose and usage."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the scope was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the scope description was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp to mark scope as deleted without removal."}],"uniqueIndexes":[{"fieldNames":["scope_name"],"unique":true}],"plainIndexes":[],"ginIndexes":[{"fieldName":"description"}]},{"name":"social_login_authorization_codes","description":"Authorization codes issued during the OAuth authorization code flow, uniquely linked to OAuth clients and users, with expiration and usage status tracking. These codes are exchanged for access tokens.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"oauth_client_id","type":"uuid","nullable":false,"description":"OAuth client associated with this authorization code {@link social_login_oauth_clients.id}","relation":{"name":"oauthClient","targetModel":"social_login_oauth_clients"},"unique":false},{"name":"user_id","type":"uuid","nullable":false,"description":"User who requested authorization {@link social_login_users.id}","relation":{"name":"user","targetModel":"social_login_users"},"unique":false}],"plainFields":[{"name":"code","type":"string","nullable":false,"description":"Authorization code string issued during authorization flow."},{"name":"redirect_uri","type":"string","nullable":false,"description":"Redirect URI used during authorization request."},{"name":"expires_at","type":"datetime","nullable":false,"description":"Expiration timestamp after which the code is invalid."},{"name":"used","type":"boolean","nullable":false,"description":"Flag indicating whether the authorization code has been used."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the authorization code was created."}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["oauth_client_id","expires_at"]}],"ginIndexes":[]}]},{"filename":"schema-05-management.prisma","namespace":"Management","models":[{"name":"social_login_management_user_views","description":"View aggregated user information for administrative management in the social login system. Includes essential identifiers, status flags, and timestamps relevant to user administration and monitoring. Relates to underlying user and guest tables for detailed linkage.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":false,"description":"User email address, uniquely identifying the user for login and contact."},{"name":"nickname","type":"string","nullable":false,"description":"User chosen nickname visible in administrative view."},{"name":"is_active","type":"boolean","nullable":false,"description":"Flag indicating if the user account is currently active."},{"name":"is_admin","type":"boolean","nullable":false,"description":"Flag indicating if the user has administrative privileges."},{"name":"last_login_at","type":"datetime","nullable":true,"description":"Timestamp of the last successful login by the user."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the user account was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp of the last update to the user account information."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active","is_admin"]},{"fieldNames":["last_login_at"]}],"ginIndexes":[]},{"name":"social_login_management_token_views","description":"Consolidated view of access and refresh token information for management console oversight. Includes token status, expiration, associated user reference, and audit timestamps for administrative token control and monitoring.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","nullable":false,"description":"Reference to the user's {@link social_login_users.id} who owns this token.","relation":{"name":"user","targetModel":"social_login_users"},"unique":false}],"plainFields":[{"name":"token_type","type":"string","nullable":false,"description":"Indicates token type, e.g., access or refresh."},{"name":"issued_at","type":"datetime","nullable":false,"description":"Timestamp when the token was issued."},{"name":"expires_at","type":"datetime","nullable":false,"description":"Timestamp when the token expires."},{"name":"is_revoked","type":"boolean","nullable":false,"description":"Flag indicating if the token has been revoked and is no longer valid."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["user_id","token_type"]},{"fieldNames":["expires_at"]}],"ginIndexes":[]},{"name":"social_login_management_client_settings","description":"Management configuration settings of OAuth clients used in the social login service. Includes client identifiers, redirect URIs, status flags, and timestamps relevant for administrative control and auditing purposes.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"client_name","type":"string","nullable":false,"description":"Human-readable OAuth client name for identification."},{"name":"client_id","type":"string","nullable":false,"description":"Unique client identifier used in OAuth flows."},{"name":"redirect_uris","type":"string","nullable":false,"description":"JSON formatted string listing allowed redirect URIs for the client."},{"name":"is_active","type":"boolean","nullable":false,"description":"Flag indicating whether this client configuration is currently active."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the client was registered."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp of the last update to client settings."}],"uniqueIndexes":[{"fieldNames":["client_id"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active"]}],"ginIndexes":[{"fieldName":"client_name"}]},{"name":"social_login_management_statistics","description":"Aggregated statistics data for monitoring social login system usage and performance over time. Supports administrative reporting and trend analysis.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"statistic_date","type":"datetime","nullable":false,"description":"The date for which these aggregated statistics are recorded."},{"name":"total_login_count","type":"int","nullable":false,"description":"Total number of login attempts made on the given date."},{"name":"successful_login_count","type":"int","nullable":false,"description":"Number of successful login attempts on the given date."},{"name":"failed_login_count","type":"int","nullable":false,"description":"Number of failed login attempts recorded for the date."},{"name":"active_user_count","type":"int","nullable":false,"description":"Number of active users on the given date."}],"uniqueIndexes":[{"fieldNames":["statistic_date"],"unique":true}],"plainIndexes":[],"ginIndexes":[]}]}]}
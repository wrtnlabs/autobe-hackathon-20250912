{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"specialty_coffee_log_cafes","description":"Holds detailed information about specialty coffee cafes including name, address, contact details, opening hours, menu description, and photo. This table is a core business entity accessible to all users for browsing and searching cafe information. Enforces uniqueness on cafe name to prevent duplicates and supports soft deletion for data integrity and recovery.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Unique name of the specialty coffee cafe."},{"name":"address","type":"string","nullable":false,"description":"Physical address of the cafe."},{"name":"contact_info","type":"string","nullable":true,"description":"Contact information such as phone number or email."},{"name":"opening_hours","type":"string","nullable":true,"description":"Human-readable opening hours of the cafe."},{"name":"menu_description","type":"string","nullable":true,"description":"Brief description of the cafe menu offerings."},{"name":"photo_url","type":"uri","nullable":true,"description":"URL string pointing to a photo of the cafe."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the cafe record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the cafe record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp when the cafe was soft deleted, if applicable."}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","deleted_at"]}],"ginIndexes":[]},{"name":"specialty_coffee_log_cafe_suggestions","description":"Stores user-submitted suggestions for adding new cafes or editing existing cafe information. Suggestions include proposed cafe data and track status for review workflow, allowing independent management of suggestions separate from the core cafe data. Each suggestion is linked to the member who submitted it for accountability.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Submitting member's {@link specialty_coffee_log_members.id}.","relation":{"name":"member","targetModel":"specialty_coffee_log_members"},"unique":false,"nullable":false}],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Proposed cafe name in the suggestion."},{"name":"address","type":"string","nullable":true,"description":"Proposed physical address in the suggestion."},{"name":"contact_info","type":"string","nullable":true,"description":"Proposed contact info such as phone or email."},{"name":"opening_hours","type":"string","nullable":true,"description":"Proposed opening hours in human-readable format."},{"name":"menu_description","type":"string","nullable":true,"description":"Proposed menu description."},{"name":"photo_url","type":"uri","nullable":true,"description":"Proposed photo URL for the cafe."},{"name":"status","type":"string","nullable":false,"description":"Review status of the suggestion, such as 'pending', 'approved', or 'rejected'."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the suggestion was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the suggestion was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp when the suggestion was soft deleted, if applicable."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["member_id","status","created_at"]}],"ginIndexes":[{"fieldName":"name"}]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"specialty_coffee_log_guests","description":"Guest user identities who can browse cafes and search but cannot log in or manage personal logs. Contains basic identification details and soft deletion for data management.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"ip_address","type":"string","nullable":false,"description":"IP address of the guest user for session tracking and identification."},{"name":"user_agent","type":"string","nullable":true,"description":"User agent string from the guest's device, providing metadata about the browser or app."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the guest record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the guest record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp to allow guest data recovery or logical deletion."}],"uniqueIndexes":[{"fieldNames":["ip_address"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"specialty_coffee_log_members","description":"Authenticated members who can create coffee logs, manage profiles, add cafes, and suggest edits. Stores login credentials and personal data with audit timestamps and soft deletion support.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":false,"description":"Unique email address used for member login and communication."},{"name":"password_hash","type":"string","nullable":false,"description":"Hashed password for secure authentication; plain passwords are never stored."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the member record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the member record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp to allow member deactivation and data recovery."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"specialty_coffee_log_sessions","description":"Session information for authenticated members. Tracks active login sessions with expiration and IP metadata, linked to members for ownership and validation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"specialty_coffee_log_member_id","type":"uuid","description":"Linked authenticated member's {@link specialty_coffee_log_members.id}.","relation":{"name":"member","targetModel":"specialty_coffee_log_members"},"unique":false,"nullable":false}],"plainFields":[{"name":"session_token","type":"string","nullable":false,"description":"Unique session token identifying the user session securely."},{"name":"ip_address","type":"string","nullable":false,"description":"IP address from which the session was initiated."},{"name":"user_agent","type":"string","nullable":true,"description":"User agent string describing client device and browser."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the session was created."},{"name":"expires_at","type":"datetime","nullable":false,"description":"Expiration timestamp at which the session becomes invalid."}],"uniqueIndexes":[{"fieldNames":["session_token"],"unique":true}],"plainIndexes":[{"fieldNames":["specialty_coffee_log_member_id","created_at"]}],"ginIndexes":[]},{"name":"specialty_coffee_log_refresh_tokens","description":"Refresh tokens for authenticated members to obtain new access tokens securely. Each token is unique and associated with a member, with timestamps for issuing and revocation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"specialty_coffee_log_member_id","type":"uuid","description":"Associated member for this refresh token. {@link specialty_coffee_log_members.id}.","relation":{"name":"member","targetModel":"specialty_coffee_log_members"},"unique":false,"nullable":false}],"plainFields":[{"name":"refresh_token","type":"string","nullable":false,"description":"Unique refresh token string used to request new access tokens."},{"name":"issued_at","type":"datetime","nullable":false,"description":"Timestamp when the refresh token was issued."},{"name":"revoked_at","type":"datetime","nullable":true,"description":"Timestamp when this refresh token was revoked or invalidated."}],"uniqueIndexes":[{"fieldNames":["refresh_token"],"unique":true}],"plainIndexes":[{"fieldNames":["specialty_coffee_log_member_id","issued_at"]}],"ginIndexes":[]}]},{"filename":"schema-03-coffeelogs.prisma","namespace":"CoffeeLogs","models":[{"name":"specialty_coffee_log_coffee_logs","description":"Stores personal coffee logs created by authenticated members. Each log is tied to one member and one cafe, representing the user's tasting experience including bean name, rating, tasting notes, and brewing method. Logs are private to members and support soft deletion and audit timestamps.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Belonged member's {@link specialty_coffee_log_members.id} who owns this coffee log.","relation":{"name":"member","targetModel":"specialty_coffee_log_members"},"unique":false,"nullable":false},{"name":"cafe_id","type":"uuid","description":"Belonged cafe's {@link specialty_coffee_log_cafes.id} where the coffee log is created.","relation":{"name":"cafe","targetModel":"specialty_coffee_log_cafes"},"unique":false,"nullable":false}],"plainFields":[{"name":"bean_name","type":"string","description":"Name of the coffee bean tasted, as recorded by the user.","nullable":false},{"name":"star_rating","type":"int","description":"User's rating of the coffee from 1 to 5 stars, inclusive.","nullable":false},{"name":"tasting_notes","type":"string","description":"Detailed tasting notes provided by the user.","nullable":false},{"name":"brewing_method","type":"string","description":"Brewing method used for this coffee tasting (e.g., espresso, pour-over).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this log was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this log was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when this log was soft deleted; null if not deleted.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["member_id","created_at"]},{"fieldNames":["cafe_id","created_at"]}],"ginIndexes":[{"fieldName":"tasting_notes"}]}]}]}
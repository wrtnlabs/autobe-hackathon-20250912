{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"flex_office_system_settings","description":"System configuration settings for FlexOffice platform. This table stores global system parameters and feature toggles that influence overall system behavior. It is foundational for all modules and must be managed by administrators. No foreign key dependencies. Includes standard created and updated timestamps for audit trail.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"key","type":"string","nullable":false,"description":"Unique configuration key identifier."},{"name":"value","type":"string","nullable":true,"description":"Value associated with the configuration key."},{"name":"description","type":"string","nullable":true,"description":"Detailed description of the configuration setting."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the configuration was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the configuration was last updated."}],"uniqueIndexes":[{"fieldNames":["key"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","updated_at"]}],"ginIndexes":[]},{"name":"flex_office_themes","description":"Theme information used in FlexOffice for UI/Page Builder customization. Each theme defines a set of visual styles and CSS that can be applied globally or per page. Managed independently to allow multiple themes and customization options. Tracks creation and update timestamps for versioning.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Unique name of the theme."},{"name":"css","type":"string","nullable":true,"description":"CSS content defining the theme styles."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the theme was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the theme was last updated."}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","updated_at"]}],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"flex_office_admins","description":"Stores administrative users with full control over the FlexOffice system. Contains authentication data such as email and password hash, along with timestamps for audit and soft deletion. Enables system-level user management and high privilege access. Email is unique across admins to ensure distinct login identities.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":false,"description":"Administrator's login email address, unique across the system."},{"name":"password_hash","type":"string","nullable":false,"description":"Hashed password for authentication purposes, never storing plain text passwords."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the admin account record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the admin account record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp; null if the admin account is active."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","email"]}],"ginIndexes":[]},{"name":"flex_office_editors","description":"Represents editor users who can create and manage UI pages and dashboards within the FlexOffice system. Includes authentication credentials, timestamps for audit, and soft delete support. Editors have permissions that are less than admins but allow content modification and collaboration.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Full name of the editor user for display and identification purposes."},{"name":"email","type":"string","nullable":false,"description":"Editor user login email, unique within the system."},{"name":"password_hash","type":"string","nullable":false,"description":"Hashed password for authentication. Do not store plain passwords."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the editor account was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the editor account was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft delete timestamp; null if the editor account is active."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","email"]}],"ginIndexes":[]},{"name":"flex_office_viewers","description":"Contains viewer users who have read-only access to dashboards and reports within FlexOffice. These users have authentication credentials and audit fields for management and compliance. Viewer accounts are unique by email and support soft deletion.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Full name of the viewer for display and identification."},{"name":"email","type":"string","nullable":false,"description":"Viewer's login email, unique within the system."},{"name":"password_hash","type":"string","nullable":false,"description":"Hashed credential for authentication, no plain text passwords stored."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the viewer account was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the viewer account was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft delete timestamp; null if the viewer account is active."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","email"]}],"ginIndexes":[]}]},{"filename":"schema-03-ui_pages.prisma","namespace":"UiPages","models":[{"name":"flex_office_pages","description":"Primary table for storing user-created UI pages, with lifecycle status and soft delete support. Contains references to themes and supports versioning via separate snapshot table. Enables independent page management and editing in the UI/Page Builder.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_page_theme_id","type":"uuid","description":"Associated page theme referencing flex_office_page_themes.id.","relation":{"name":"pageTheme","targetModel":"flex_office_page_themes"},"unique":false,"nullable":true}],"plainFields":[{"name":"name","type":"string","description":"The display name or title of the page.","nullable":false},{"name":"description","type":"string","description":"Optional detailed description of the page.","nullable":true},{"name":"status","type":"string","description":"Current lifecycle status of the page, e.g., draft, published, archived.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp for soft deletion; null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]}],"ginIndexes":[]},{"name":"flex_office_widgets","description":"Stores individual UI widgets that users can place on pages. Independent management allowed with soft delete and audit timestamps. Widgets link to pages and support attribute definition and display configurations.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_page_id","type":"uuid","description":"The page this widget belongs to, referencing flex_office_pages.id.","relation":{"name":"page","targetModel":"flex_office_pages"},"unique":false,"nullable":false}],"plainFields":[{"name":"widget_type","type":"string","description":"Type of the widget, e.g., table, chart, filter, button, form.","nullable":false},{"name":"name","type":"string","description":"Name or label of the widget.","nullable":false},{"name":"configuration","type":"string","description":"JSON string storing widget-specific configuration details.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp for soft deletion; null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["flex_office_page_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["widget_type"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"flex_office_page_versions","description":"Historical snapshots of UI pages capturing their state at version points for rollback and auditing. Each version links to a page and stores full serialized data.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_page_id","type":"uuid","description":"Referenced UI page for this version snapshot, referencing flex_office_pages.id.","relation":{"name":"page","targetModel":"flex_office_pages"},"unique":false,"nullable":false}],"plainFields":[{"name":"version_number","type":"int","description":"Sequential version number for the snapshot.","nullable":false},{"name":"page_data","type":"string","description":"Serialized JSON data of the page state at snapshot time.","nullable":false},{"name":"created_at","type":"datetime","description":"Version creation timestamp.","nullable":false}],"uniqueIndexes":[{"fieldNames":["flex_office_page_id","version_number"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"flex_office_widget_scripts","description":"Scripts associated with widgets that define custom logic in JavaScript or Python. Linked to widgets for extensibility and custom behavior.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_widget_id","type":"uuid","description":"Associated widget referencing flex_office_widgets.id.","relation":{"name":"widget","targetModel":"flex_office_widgets"},"unique":false,"nullable":false}],"plainFields":[{"name":"script_type","type":"string","description":"Type of scripting language, e.g., javascript, python.","nullable":false},{"name":"script_content","type":"string","description":"The actual script content as text.","nullable":false},{"name":"created_at","type":"datetime","description":"Script creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp of the script.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["script_type"]}],"ginIndexes":[]},{"name":"flex_office_page_themes","description":"Themes that define visual styles for UI pages. Allows users to select and manage themes for consistent appearance.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","description":"Theme name to identify and select for pages.","nullable":false},{"name":"description","type":"string","description":"Optional detailed theme description.","nullable":true},{"name":"created_at","type":"datetime","description":"Theme creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp of the theme.","nullable":false}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]}]},{"filename":"schema-04-data_sources.prisma","namespace":"DataSources","models":[{"name":"flex_office_data_sources","description":"Stores configuration and metadata for external data sources in FlexOffice, including connection details, type classification, and activation status. Serves as the central registry enabling unified access and management of diverse external databases and spreadsheets.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Human-readable unique name for the data source."},{"name":"type","type":"string","nullable":false,"description":"Type category of the data source, such as 'mysql', 'postgresql', 'google_sheet', or 'excel'."},{"name":"connection_info","type":"string","nullable":false,"description":"Structured connection details or credentials reference stored securely for accessing the data source."},{"name":"is_active","type":"boolean","nullable":false,"description":"Flag indicating whether the data source is active and available for synchronization."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this data source record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this data source record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp indicating when this data source was soft deleted, if applicable."}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active","created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[]},{"name":"flex_office_data_source_syncs","description":"Records scheduled and executed synchronization operations for external data sources. Tracks timestamps, status, success, and error details enabling monitoring and retry mechanisms for data refresh workflows.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_data_source_id","type":"uuid","nullable":false,"description":"Foreign key referencing the associated {@link flex_office_data_sources.id} data source.","relation":{"name":"dataSource","targetModel":"flex_office_data_sources"},"unique":false}],"plainFields":[{"name":"scheduled_at","type":"datetime","nullable":false,"description":"Scheduled execution time for the sync operation."},{"name":"started_at","type":"datetime","nullable":true,"description":"Timestamp when the actual synchronization started."},{"name":"completed_at","type":"datetime","nullable":true,"description":"Timestamp when the synchronization finished."},{"name":"status","type":"string","nullable":false,"description":"Current status of the sync operation, with allowed values such as 'pending', 'running', 'success', 'failed'."},{"name":"error_message","type":"string","nullable":true,"description":"Error message details if the sync operation failed."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Last record update timestamp."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["flex_office_data_source_id","scheduled_at"]},{"fieldNames":["status","scheduled_at"]}],"ginIndexes":[]},{"name":"flex_office_data_source_credentials","description":"Securely stores credentials used to authenticate access to data sources, supporting multiple types including OAuth2 tokens and API keys. Credentials include expiration and soft deletion for secure lifecycle management.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_data_source_id","type":"uuid","nullable":false,"description":"Foreign key referencing the related {@link flex_office_data_sources.id} data source.","relation":{"name":"dataSource","targetModel":"flex_office_data_sources"},"unique":false}],"plainFields":[{"name":"credential_type","type":"string","nullable":false,"description":"The type of credential, e.g., 'oauth2', 'api_key'."},{"name":"credential_value","type":"string","nullable":false,"description":"The credential token or key value, stored securely."},{"name":"expires_at","type":"datetime","nullable":true,"description":"Expiration timestamp for the credential if applicable."},{"name":"created_at","type":"datetime","nullable":false,"description":"Credential record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Last credential update timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp to mark credential revocation."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["flex_office_data_source_id","credential_type"]}],"ginIndexes":[]},{"name":"flex_office_external_sheets","description":"Stores metadata for externally uploaded spreadsheet files, including Google Sheets and Excel, linked to data sources. Captures file identification, access URLs, sheet counts, synchronization timestamps, and soft deletion data.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_data_source_id","type":"uuid","nullable":false,"description":"Foreign key referencing the linked {@link flex_office_data_sources.id} data source.","relation":{"name":"dataSource","targetModel":"flex_office_data_sources"},"unique":false}],"plainFields":[{"name":"file_name","type":"string","nullable":false,"description":"Original name of the uploaded spreadsheet file."},{"name":"file_url","type":"uri","nullable":false,"description":"URL location to access the spreadsheet remotely."},{"name":"sheet_count","type":"int","nullable":false,"description":"Count of individual sheets contained within the spreadsheet."},{"name":"last_synced_at","type":"datetime","nullable":true,"description":"Timestamp of the last successful synchronization of the sheet."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the metadata record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this metadata record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp for this spreadsheet metadata."}],"uniqueIndexes":[{"fieldNames":["file_url"],"unique":true}],"plainIndexes":[{"fieldNames":["last_synced_at"]}],"ginIndexes":[]},{"name":"flex_office_data_source_logs","description":"Contains audit and operational log entries related to data sources, supporting troubleshooting and security auditing. Logs include event timestamps, severity levels, user attribution, and descriptive messages.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_data_source_id","type":"uuid","nullable":false,"description":"Foreign key linking to the associated {@link flex_office_data_sources.id} data source.","relation":{"name":"dataSource","targetModel":"flex_office_data_sources"},"unique":false}],"plainFields":[{"name":"log_level","type":"string","nullable":false,"description":"Severity level of the log entry, e.g., 'info', 'warning', 'error'."},{"name":"message","type":"string","nullable":false,"description":"Detailed message describing the log event."},{"name":"timestamp","type":"datetime","nullable":false,"description":"Event occurrence timestamp."},{"name":"user_id","type":"uuid","nullable":true,"description":"User ID if the event is user-triggered; null for system-generated logs."},{"name":"created_at","type":"datetime","nullable":false,"description":"Log record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the log record was last updated."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["log_level","timestamp"]}],"ginIndexes":[]}]},{"filename":"schema-05-collaboration.prisma","namespace":"Collaboration","models":[{"name":"flex_office_page_editors","description":"Tracks currently active concurrent editors on pages to enforce limits and manage collaboration sessions. References a page and an editor user. Supports soft delete for deactivation when an editor leaves. Temporal fields included for record-keeping.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"page_id","type":"uuid","description":"Referenced page's {@link flex_office_pages.id}.","relation":{"name":"page","targetModel":"flex_office_pages"},"unique":false,"nullable":false},{"name":"editor_id","type":"uuid","description":"Referenced editor user's {@link flex_office_editors.id}.","relation":{"name":"editor","targetModel":"flex_office_editors"},"unique":false,"nullable":false}],"plainFields":[{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the editor session started."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the editor session was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp when the editor session was closed or removed (soft delete)."}],"uniqueIndexes":[{"fieldNames":["page_id","editor_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","deleted_at"]}],"ginIndexes":[]},{"name":"flex_office_page_comments","description":"Stores user comments on pages supporting collaboration and editorial workflows. Comments belong to a page and an editor user. Supports soft delete for comment moderation. Allows indexing of comment content for full-text search.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"page_id","type":"uuid","description":"Belonged page's {@link flex_office_pages.id}.","relation":{"name":"page","targetModel":"flex_office_pages"},"unique":false,"nullable":false},{"name":"editor_id","type":"uuid","description":"Belonged editor user's {@link flex_office_editors.id}.","relation":{"name":"editor","targetModel":"flex_office_editors"},"unique":false,"nullable":false}],"plainFields":[{"name":"content","type":"string","nullable":false,"description":"The text content of the comment."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the comment was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the comment was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp when the comment was soft deleted or moderated."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at","deleted_at"]}],"ginIndexes":[{"fieldName":"content"}]},{"name":"flex_office_edit_conflicts","description":"Captures records of edit conflicts occurring in collaborative editing sessions. Provides historical tracking and audit trails for conflict resolution. Links to the affected page, involved editor, and the conflicting change snapshot. Immutable append-only snapshot table capturing details and timestamps.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"page_id","type":"uuid","description":"Referenced page's {@link flex_office_pages.id}.","relation":{"name":"page","targetModel":"flex_office_pages"},"unique":false,"nullable":false},{"name":"editor_id","type":"uuid","description":"Referenced editor who caused the conflict {@link flex_office_editors.id}.","relation":{"name":"editor","targetModel":"flex_office_editors"},"unique":false,"nullable":false}],"plainFields":[{"name":"conflict_data","type":"string","nullable":false,"description":"JSON encoded data representing conflicting changes."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the conflict record was created."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]}]},{"filename":"schema-06-analytics.prisma","namespace":"Analytics","models":[{"name":"flex_office_charts","description":"Store metadata and configuration details of various chart types used in analytics dashboards. This includes chart identifiers, chart type specifications, titles, descriptions, and widget associations. Supports multiple widgets referencing charts for reuse. Stance is primary due to direct management and CRUD operations by users defining analytics.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_widget_id","type":"uuid","description":"Associated widget's {@link flex_office_widgets.id} that renders this chart.","relation":{"name":"widget","targetModel":"flex_office_widgets"},"unique":false,"nullable":false}],"plainFields":[{"name":"chart_type","type":"string","description":"Type of chart, e.g., bar, line, pie, histogram etc., defining visualization style.","nullable":false},{"name":"title","type":"string","description":"Descriptive title for the chart shown to users.","nullable":false},{"name":"description","type":"string","description":"Detailed description or purpose of the chart for business context.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this chart was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this chart was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp; indicates if the chart is deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["flex_office_widget_id","title"],"unique":true}],"plainIndexes":[{"fieldNames":["chart_type","created_at"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"description"}]},{"name":"flex_office_kpi_widgets","description":"Represents KPI widgets used in dashboards to show key performance indicators. Each widget associates with a UI widget, holds configuration JSON describing data sources, aggregates and display formats. KPI widgets enable users to quickly grasp business metrics and are managed independently, supporting CRUD operations.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_widget_id","type":"uuid","description":"Linked UI widget {@link flex_office_widgets.id} presenting the KPI data.","relation":{"name":"widget","targetModel":"flex_office_widgets"},"unique":false,"nullable":false}],"plainFields":[{"name":"config_json","type":"string","description":"JSON string specifying data queries, aggregation methods, and display options for the KPI widget.","nullable":false},{"name":"created_at","type":"datetime","description":"When the KPI widget was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the KPI widget was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp; presence means widget is deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["flex_office_widget_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"flex_office_filter_conditions","description":"Houses filter condition definitions applied to charts and widgets for dynamic data querying. Conditions include identifiers, filter expressions, linked chart/widget references, and enablement flags. This table supports filtering functionality essential to analytics personalisation and user-driven data exploration.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"flex_office_chart_id","type":"uuid","description":"The chart this filter condition belongs to {@link flex_office_charts.id}.","relation":{"name":"chart","targetModel":"flex_office_charts"},"unique":false,"nullable":false},{"name":"flex_office_widget_id","type":"uuid","description":"Optional reference to the widget {@link flex_office_widgets.id} this condition may be attached to.","relation":{"name":"widget","targetModel":"flex_office_widgets"},"unique":false,"nullable":true}],"plainFields":[{"name":"filter_expression","type":"string","description":"Expression defining the filter logic in a domain-specific language or query format.","nullable":false},{"name":"enabled","type":"boolean","description":"Indicates if the filter condition is currently active and should be applied.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp of filter condition creation.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last update to the filter condition.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["enabled","created_at"]}],"ginIndexes":[{"fieldName":"filter_expression"}]},{"name":"flex_office_export_logs","description":"Tracks export operations performed by users including details such as export type, target data, timestamps and success/failure status. Supports auditing and monitoring of data sharing activities in analytics reports. Subsidiary stance as a usage log without user direct modification.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"export_type","type":"string","description":"Type/format of the export such as CSV, Excel, PDF.","nullable":false},{"name":"target_object","type":"string","description":"Identifier of the exported data or report, e.g., chart or dashboard ID.","nullable":false},{"name":"status","type":"string","description":"Result of the export operation, e.g., success, failure.","nullable":false},{"name":"executed_by_user_id","type":"uuid","description":"User ID who performed the export operation.","nullable":false},{"name":"executed_at","type":"datetime","description":"Timestamp when the export was executed.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation time for audit purposes.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["executed_by_user_id","executed_at"]}],"ginIndexes":[]}]},{"filename":"schema-07-administration.prisma","namespace":"Administration","models":[{"name":"flex_office_audit_logs","description":"Audit log records capturing immutable, append-only security and system events for compliance monitoring. Includes event type, actor, target, action details, and timestamps. Used for forensic audits and regulatory compliance.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"event_type","type":"string","nullable":false,"description":"Type/category of the audit event, e.g., 'login', 'permission_change', 'data_access'."},{"name":"actor_type","type":"string","nullable":false,"description":"Role or type of the actor performing the action, e.g., 'admin', 'editor', 'viewer'."},{"name":"actor_id","type":"uuid","nullable":true,"description":"Unique identifier of the user who performed the action; nullable if system generated event."},{"name":"target_type","type":"string","nullable":true,"description":"Type/category of the target entity affected by the event, e.g., 'page', 'data_source'."},{"name":"target_id","type":"uuid","nullable":true,"description":"Unique identifier of the target entity involved in the event."},{"name":"action","type":"string","nullable":false,"description":"Describes the specific action performed, e.g., 'create', 'update', 'delete'."},{"name":"description","type":"string","nullable":true,"description":"Optional detailed description of the audit event."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the audit event was recorded."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the audit event record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp marking soft deletion; null if not deleted."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["actor_id","created_at"]},{"fieldNames":["target_id","created_at"]},{"fieldNames":["event_type","created_at"]}],"ginIndexes":[{"fieldName":"description"}]},{"name":"flex_office_user_activity_logs","description":"User activity logs tracking user interactions with the system for monitoring, analytics, and troubleshooting. Records user id, action types, details, and timestamps. Append-only snapshot table for historical analysis.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","nullable":false,"description":"Referenced user's {@link flex_office_admins.id}, {@link flex_office_editors.id}, or {@link flex_office_viewers.id} depending on role.","relation":{"name":"user","targetModel":"flex_office_admins"},"unique":false}],"plainFields":[{"name":"action_type","type":"string","nullable":false,"description":"Type/category of the action performed by the user, e.g., 'login', 'edit_page', 'view_dashboard'."},{"name":"action_details","type":"string","nullable":true,"description":"Optional details providing additional context about the user's action."},{"name":"ip_address","type":"string","nullable":true,"description":"IP address from which the user performed the action."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the user action was recorded."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the user action record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft delete timestamp; null if not deleted."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["user_id","created_at"]},{"fieldNames":["action_type","created_at"]}],"ginIndexes":[{"fieldName":"action_details"}]},{"name":"flex_office_system_alerts","description":"Operational system alerts representing notifications and warnings about system health, security, or performance status. Supports creation, updating, and filtering by severity and status.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"severity","type":"string","nullable":false,"description":"Alert severity level, e.g., 'info', 'warning', 'critical'."},{"name":"message","type":"string","nullable":false,"description":"Detailed alert message describing the issue or event."},{"name":"is_resolved","type":"boolean","nullable":false,"description":"Flag indicating whether the alert has been resolved."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the alert was generated."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the alert record was last updated."},{"name":"resolved_at","type":"datetime","nullable":true,"description":"Timestamp when the alert was resolved, null if unresolved."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["severity","is_resolved","created_at"]}],"ginIndexes":[{"fieldName":"message"}]}]},{"filename":"schema-08-extensibility.prisma","namespace":"Extensibility","models":[{"name":"flex_office_custom_scripts","description":"Custom logic scripts for extending FlexOffice functionality. Represents standalone programmable modules that can execute JavaScript or Python code. Managed independently by administrators or developers. Supports soft deletion and audit tracking.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","nullable":false,"description":"Unique business identifier for the custom script."},{"name":"name","type":"string","nullable":false,"description":"Human-readable name of the custom script."},{"name":"description","type":"string","nullable":true,"description":"Detailed description of the script's purpose and usage."},{"name":"script_language","type":"string","nullable":false,"description":"Programming language of the custom script (e.g., JavaScript, Python)."},{"name":"script_content","type":"string","nullable":false,"description":"Source code content of the custom script."},{"name":"created_at","type":"datetime","nullable":false,"description":"Time of script creation."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Time of last script update."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp indicating when the script was archived or removed."}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","updated_at"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"flex_office_marketplace_widgets","description":"Prebuilt widgets available in the FlexOffice marketplace that users can browse and install. Each widget is uniquely identified and includes metadata such as version and description. Supports audit and soft delete for lifecycle management.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"widget_code","type":"string","nullable":false,"description":"Unique code identifying the marketplace widget."},{"name":"name","type":"string","nullable":false,"description":"Human-friendly widget name."},{"name":"version","type":"string","nullable":false,"description":"Version string following semantic versioning for the widget."},{"name":"description","type":"string","nullable":true,"description":"Detailed description of the widget's functionality and features."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the widget was created in the marketplace."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp of last widget metadata update."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp marking if the widget has been deprecated or removed."}],"uniqueIndexes":[{"fieldNames":["widget_code"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","updated_at"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"flex_office_widget_installations","description":"Records of marketplace widgets installed within FlexOffice pages. Links marketplace widgets to specific UI pages and captures installation metadata for management and audit purposes.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"marketplace_widget_id","type":"uuid","description":"Referenced marketplace widget {@link flex_office_marketplace_widgets.id}.","relation":{"name":"marketplaceWidget","targetModel":"flex_office_marketplace_widgets"},"unique":false,"nullable":false},{"name":"page_id","type":"uuid","description":"Associated UI page {@link flex_office_pages.id}.","relation":{"name":"page","targetModel":"flex_office_pages"},"unique":false,"nullable":false}],"plainFields":[{"name":"installation_date","type":"datetime","nullable":false,"description":"Timestamp when the widget was installed on the page."},{"name":"configuration_data","type":"string","nullable":true,"description":"JSON string representing configuration settings for the installed widget."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last update timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["marketplace_widget_id","page_id"]}],"ginIndexes":[{"fieldName":"configuration_data"}]}]},{"filename":"schema-09-access_control.prisma","namespace":"AccessControl","models":[{"name":"flex_office_role_assignments","description":"Assignment of roles to users within the FlexOffice system. Links users to roles, enforcing RBAC. Tracks creation, update timestamps and supports soft deletion. Primary entity enabling role-based access control.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Belonged user's flex_office_admins.id, flex_office_editors.id, or flex_office_viewers.id.","relation":{"name":"user","targetModel":"flex_office_admins"},"unique":false,"nullable":false}],"plainFields":[{"name":"role_name","type":"string","description":"Name of the assigned role, e.g., Admin, Editor, Viewer.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp to support recoverability.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id","role_name"],"unique":true}],"plainIndexes":[{"fieldNames":["role_name","created_at"]}],"ginIndexes":[]},{"name":"flex_office_permissions","description":"Defines distinct permissions available in the FlexOffice system. Permissions describe specific access rights or actions. Supports active status and audit tracking.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"permission_key","type":"string","description":"Unique permission identifier key, e.g., 'edit_pages', 'view_reports'.","nullable":false},{"name":"description","type":"string","description":"Detailed description of what this permission grants.","nullable":true},{"name":"status","type":"string","description":"Status of the permission, e.g., active or disabled.","nullable":false},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last update timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft deletion timestamp for recoverability."}],"uniqueIndexes":[{"fieldNames":["permission_key"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]}],"ginIndexes":[]},{"name":"flex_office_table_permissions","description":"Permissions scoped to specific database tables in the FlexOffice system. Defines which permissions apply to which tables. Subsidiary entity supporting granular access control.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"permission_id","type":"uuid","description":"Referenced permission's flex_office_permissions.id.","relation":{"name":"permission","targetModel":"flex_office_permissions"},"unique":false,"nullable":false}],"plainFields":[{"name":"table_name","type":"string","description":"Name of the database table this permission applies to.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["permission_id","table_name"],"unique":true}],"plainIndexes":[{"fieldNames":["table_name","created_at"]}],"ginIndexes":[{"fieldName":"table_name"}]},{"name":"flex_office_column_permissions","description":"Permissions scoped to specific columns within tables in FlexOffice. Supports fine-grained column access control. Subsidiary entity supporting detailed permission coverage.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"table_permission_id","type":"uuid","description":"Referenced table permission's flex_office_table_permissions.id.","relation":{"name":"tablePermission","targetModel":"flex_office_table_permissions"},"unique":false,"nullable":false}],"plainFields":[{"name":"column_name","type":"string","description":"Name of the column this permission controls.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["table_permission_id","column_name"],"unique":true}],"plainIndexes":[{"fieldNames":["column_name","created_at"]}],"ginIndexes":[{"fieldName":"column_name"}]},{"name":"flex_office_row_permissions","description":"Row-level permissions enabling filtering rules for data access control in FlexOffice. Supports complex conditions for row filtering. Subsidiary entity for detailed security enforcement.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"table_permission_id","type":"uuid","description":"Referenced table permission's flex_office_table_permissions.id.","relation":{"name":"tablePermission","targetModel":"flex_office_table_permissions"},"unique":false,"nullable":false}],"plainFields":[{"name":"filter_condition","type":"string","description":"Filter condition as a SQL WHERE clause or expression for row-level access control.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for record recovery.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"filter_condition"}]}]}]}
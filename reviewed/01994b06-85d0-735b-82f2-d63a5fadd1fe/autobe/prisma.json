{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"healthcare_platform_organizations","description":"Represents a top-level tenant or organization (hospital, clinic, practice) within the healthcarePlatform system. Defines the overall data isolation boundary for all entity assignments, resources, and business operations. Serves as the ultimate parent in the multi-tenant data model. Relationships: has many departments, staff assignments, configurations, locale settings. Critical for RBAC, compliance, and resource partitioning.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Unique business code for the organization (assigned for technical or cross-system mapping).","nullable":false},{"name":"name","type":"string","description":"Official organization name for display and legal documentation.","nullable":false},{"name":"status","type":"string","description":"Current status of the organization (active, suspended, pending, archived, etc.).","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp for the organization.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for the organization.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for archival/compliance retention (null if active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"healthcare_platform_departments","description":"A department or business unit within an organization (e.g., Cardiology, Radiology, Billing). Departments are mapped to an organization and provide an isolated context for department head assignments, scheduling, and resource allocation. Enables finer-grained access control and workflow partitioning within each organization.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Parent organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"code","type":"string","description":"Short code for the department (unique within organization for business logic).","nullable":false},{"name":"name","type":"string","description":"Display/legal name for the department.","nullable":false},{"name":"status","type":"string","description":"Current status of the department (active, suspended, pending, archived, etc.).","nullable":false},{"name":"created_at","type":"datetime","description":"Department creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last modification timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp (null = active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","code"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id","status"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"healthcare_platform_roles","description":"Represents platform-wide and organization-level roles (e.g., admin, doctor, nurse, technician, patient, receptionist). Defines RBAC and permission boundaries. Roles can be platform global, organization-scoped, or department-scoped depending on configuration. Used in conjunction with permissions and user assignments.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Role code used for assignment, internal mappings, and cross-system integration (e.g., 'system_admin', 'organization_admin', 'medical_doctor').","nullable":false},{"name":"name","type":"string","description":"Role display name.","nullable":false},{"name":"scope_type","type":"string","description":"Level at which this role applies: platform, organization, department.","nullable":false},{"name":"status","type":"string","description":"Current status of the role (active, retired, system-only, archived, etc.).","nullable":false},{"name":"created_at","type":"datetime","description":"Role creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last role update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp for role archival (null=active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["code","scope_type"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"healthcare_platform_permissions","description":"Permission entity defining a specific actionable operation or scope (e.g., 'manage_users', 'view_ehr', 'edit_billing'). Used in RBAC to define which actions are available for which roles. Permissions can be assigned to roles at platform, org, or department level. Enables granular authorization policies.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Unique code for this permission (e.g., 'edit_patient_record').","nullable":false},{"name":"name","type":"string","description":"Human-readable name for this permission.","nullable":false},{"name":"description","type":"string","description":"Explanation of the permission's intent and usage scenario.","nullable":false},{"name":"scope_type","type":"string","description":"Level at which this permission is applicable: platform, organization, department.","nullable":false},{"name":"status","type":"string","description":"Current status of the permission (active, retired, system, etc.).","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp if permission is retired.","nullable":true}],"uniqueIndexes":[{"fieldNames":["code","scope_type"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"healthcare_platform_org_department_assignments","description":"Maps organizations to departments for organizational hierarchy management and delegation workflows. Each row links a department to its parent organization with timestamp and audit trail for team structures. Enables complex org/department relationship enforcement and permission propagation.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Assigned organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"healthcare_platform_department_id","type":"uuid","description":"Assigned department's {@link healthcare_platform_departments.id}.","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":false}],"plainFields":[{"name":"created_at","type":"datetime","description":"Assignment creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Assignment update timestamp (last structural change).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for assignment. Null if currently active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","healthcare_platform_department_id"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id"]},{"fieldNames":["healthcare_platform_department_id"]}],"ginIndexes":[]},{"name":"healthcare_platform_user_org_assignments","description":"Mapping table assigning users to organizations for platform access, RBAC, and scoped business operations. Critical for multi-tenant data and permission enforcement. Each record ties a user to a single org (others are referenced from user tables in other components). Assignment timestamp and status are tracked for audit and access review.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Reference to user in global user tables (e.g., healthcare_platform_systemadmins, organizationadmins, etc. in other components).","relation":{"name":"user","targetModel":"healthcare_platform_systemadmins"},"unique":false,"nullable":false},{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization this user is assigned to. {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"role_code","type":"string","description":"Role code for assigned user within this organization instance (syncs with roles in roles table).","nullable":false},{"name":"assignment_status","type":"string","description":"Current assignment status (active, pending, suspended, deleted).","nullable":false},{"name":"created_at","type":"datetime","description":"Assignment creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Assignment update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp, null if assignment is active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id","healthcare_platform_organization_id"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id","role_code"]}],"ginIndexes":[]},{"name":"healthcare_platform_configuration","description":"Represents system-wide and per-organization configuration settings. Stores configuration keys and values for customizable, versioned, and auditable settings. Can be global (if organization_id is null) or linked to a specific organization for tenant-scoped config. Only business/operational configuration data (never clinical or PHI).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization this config applies to (nullable for global configs). {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":true}],"plainFields":[{"name":"key","type":"string","description":"Configuration key (e.g., 'language', 'timezone', 'feature_flag_name').","nullable":false},{"name":"value","type":"string","description":"Configuration value as string (can be serialized for structured values).","nullable":false},{"name":"description","type":"string","description":"Description of what this config controls and its impact.","nullable":false},{"name":"created_at","type":"datetime","description":"Config record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last configuration update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp, null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["key","healthcare_platform_organization_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[{"fieldName":"key"}]},{"name":"healthcare_platform_locale_settings","description":"Stores locale and regionalization settings for the platform or specific organizations/departments (time zone, language, formatting). Used for translation and location-aware experiences. Unique per organization/department context, providing override hierarchy. Only technical/business localization.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization for which the locale settings apply. Nullable for platform-global settings. {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":true},{"name":"healthcare_platform_department_id","type":"uuid","description":"(Optional) Department for which these settings are specifically applied. Nullable if org-level or platform global. {@link healthcare_platform_departments.id}.","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true}],"plainFields":[{"name":"language","type":"string","description":"Language code (e.g., en-US, es-ES) for localization.","nullable":false},{"name":"timezone","type":"string","description":"IANA timezone string for scheduling/notifications (e.g., 'America/New_York').","nullable":false},{"name":"date_format","type":"string","description":"Default date display format (e.g., YYYY-MM-DD, MM/DD/YYYY).","nullable":false},{"name":"time_format","type":"string","description":"Default time display format (e.g., 24h, 12h).","nullable":false},{"name":"number_format","type":"string","description":"Number formatting convention for region/country (e.g., 1,234.56 vs 1.234,56).","nullable":false},{"name":"created_at","type":"datetime","description":"Settings record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Settings last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp, null if settings are active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","healthcare_platform_department_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"healthcare_platform_systemadmins","description":"System-wide superuser administrators responsible for platform management, cross-organization configuration, integrations, operational monitoring, and global audit. These users have highest privileges and are subject to highest audit standards. Assignment is strictly controlled; linked to organizations and audit/event logs via separate assignment and audit tables.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Email address for login and notifications. Must be unique; business-only, no personal domains allowed.","nullable":false},{"name":"full_name","type":"string","description":"Full legal name of the system admin.","nullable":false},{"name":"phone","type":"string","description":"Business phone number for contact and MFA challenges.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when admin account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for this account.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete marker; indicates if the admin record is deactivated/retired.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_organizationadmins","description":"Organization-level administrators responsible for managing users, policies, configuration, billing, reporting, and compliance for an individual healthcare tenant. Role-limited to specific organizations and referenced from org assignment table. Subject to audit and strict workflow constraints.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Business email for organization admin login. Must be unique within platform.","nullable":false},{"name":"full_name","type":"string","description":"Full legal name of organization admin.","nullable":false},{"name":"phone","type":"string","description":"Contact number for notifications and security events.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when admin account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when admin account was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion marker indicating org admin is deactivated.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_departmentheads","description":"Clinical or operational department heads within organizations, responsible for staff/resource management, analytics, scheduling, and internal approvals. Each department head is linked to an organization and may be referenced in department assignment tables. Direct permissions scoped to department context.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Business email used for login and escalations. Must be unique across all department heads.","nullable":false},{"name":"full_name","type":"string","description":"Full legal name of department head.","nullable":false},{"name":"phone","type":"string","description":"Business phone for alerts and access confirmation.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp for account creation date.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for this record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete marker indicating deactivation or transfer.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_medicaldoctors","description":"Licensed medical professionals responsible for patient care, diagnosis, order entry, prescriptions, and care coordination within an organization. Each doctor may be referenced from assignments and credential verification tables. Extensive audit obligations.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Unique business email for system login and clinical communication.","nullable":false},{"name":"full_name","type":"string","description":"Full legal name as registered for licensure and clinical privilege.","nullable":false},{"name":"npi_number","type":"string","description":"National Provider Identifier (NPI) for credential verification; must be unique for each doctor.","nullable":false},{"name":"specialty","type":"string","description":"Clinical specialty (e.g., Cardiology, Pediatrics).","nullable":true},{"name":"phone","type":"string","description":"Contact number for notifications and emergency alerts.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp of account creation.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last update to doctor record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion; null unless this doctor account is archived/inactive.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["npi_number"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_nurses","description":"Clinical nursing staff responsible for patient care, monitoring, medication administration, and supporting clinical workflows. Nurses have distinct scope and privilege and undergo credential verification. Each nurse is referenced by assignments and audit logs. Audit trails required for all patient-related activity.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Business email for login and staff communication. Must be unique among nurses.","nullable":false},{"name":"full_name","type":"string","description":"Full legal name of nurse, as used for credentials and patient-facing activity.","nullable":false},{"name":"license_number","type":"string","description":"State-issued license/certification for clinical practice. Must be unique for auditing.","nullable":false},{"name":"specialty","type":"string","description":"Primary clinical area of nursing (optional, e.g., ICU, Med/Surg).","nullable":true},{"name":"phone","type":"string","description":"Work/personal phone for shift notifications and alerts.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when nurse account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp for last modification to nurse record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion/archival status field.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["license_number"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_technicians","description":"Technical clinical staff involved in diagnostics, imaging, equipment management, and lab processing. Techs have separate credential validation and have access limited to technical orders. Referenced from assignment and audit logs.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Business email for login and shift notification. Unique among all technicians.","nullable":false},{"name":"full_name","type":"string","description":"Full legal name for credentialing purposes.","nullable":false},{"name":"license_number","type":"string","description":"Technical/professional license for role (state or registry). Must be unique.","nullable":false},{"name":"specialty","type":"string","description":"Field of technical expertise (Radiology, Phlebotomy, etc).","nullable":true},{"name":"phone","type":"string","description":"Contact number for scheduling, emergencies.","nullable":true},{"name":"created_at","type":"datetime","description":"When technician account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Date/time when technician data last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion / archive marker.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["license_number"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_receptionists","description":"Reception/admin users who schedule appointments, manage check-in/out, update patient basic info. No clinical privileges. May be referenced from assignment and workflow/lifecycle tables.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Receptionist login and business email. Unique for this table.","nullable":false},{"name":"full_name","type":"string","description":"Full name of the receptionist for identification and messaging.","nullable":false},{"name":"phone","type":"string","description":"Business or organizational contact number.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp of receptionist record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp for last update to this account.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion field; receptionist account is deactivated.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_patients","description":"Patient/consumer users of the system. Patients can self-register or be registered by staff, manage personal health info and records, appointments, and billing. All personal health information (PHI) managed under regulatory obligations. No direct references to department, assignment, or staff tables here; handled via relationships. Consent, privacy flag, and record assignments handled via separate tables.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Personal or organizational email for login and portal notifications. Must be unique for all patients.","nullable":false},{"name":"full_name","type":"string","description":"Legal full name as used in identity or insurance documents.","nullable":false},{"name":"date_of_birth","type":"datetime","description":"Date of birth for patient identity, required for matching and legal compliance.","nullable":false},{"name":"phone","type":"string","description":"Contact number for reminders and portal communications.","nullable":true},{"name":"created_at","type":"datetime","description":"Account creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update time for patient profile.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion/closure marking, if account is closed or deregistered.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_user_authentications","description":"Authentication records supporting login via email/password, SSO, or federated provider for any user entity (reference by actor type). Stores hashed credentials, provider keys, SSO tokens, and authentication method. Used for login, session validation, and audit. Strictly subsidiary, managed by system APIs.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"user_id","type":"uuid","description":"UUID of the user this authentication record belongs to (cross-table reference by user/actor type).","nullable":false},{"name":"user_type","type":"string","description":"Indicates which actor table this refers to (systemadmin, orgadmin, etc). Used for business logic and query purposes.","nullable":false},{"name":"provider","type":"string","description":"The authentication provider (local, saml, oauth2, ad).","nullable":false},{"name":"provider_key","type":"string","description":"Provider-specific user or session key (may be SSO subject, user_id, etc).","nullable":false},{"name":"password_hash","type":"string","description":"Bcrypt hash for local credentials (optional for SSO providers).","nullable":true},{"name":"last_authenticated_at","type":"datetime","description":"When this user last successfully authenticated via this record/provider.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when auth record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last modification to this authentication record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete field for rotation/retire.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_type","provider","provider_key"],"unique":true}],"plainIndexes":[{"fieldNames":["user_id","user_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_auth_sessions","description":"Authentication session records, tracking issued tokens (JWT, refresh), session state, expiry, revocation, and business context for all user types (referenced by user_id/user_type). Used for permissions, revocation, audit. Sessions can be forcibly terminated by business or security rules. Strict subsidiary stance.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"user_id","type":"uuid","description":"Reference to the user associated with this session. Cross-table reference.","nullable":false},{"name":"user_type","type":"string","description":"Table/type discriminator for the user (systemadmin/orgadmin/etc).","nullable":false},{"name":"session_token","type":"string","description":"Opaque session token or JWT; unique value for session management.","nullable":false},{"name":"refresh_token","type":"string","description":"Refresh token for session extension; null for some SSO providers.","nullable":true},{"name":"issued_at","type":"datetime","description":"Timestamp for session start/issue.","nullable":false},{"name":"expires_at","type":"datetime","description":"Session planned expiration. Subject to renewal or rotation policies.","nullable":false},{"name":"revoked_at","type":"datetime","description":"When the session was forcibly terminated/expired; null if still active.","nullable":true},{"name":"user_agent","type":"string","description":"User agent/browser/device info for session security/audit.","nullable":true},{"name":"ip_address","type":"string","description":"IP address for session source logging.","nullable":true}],"uniqueIndexes":[{"fieldNames":["session_token"],"unique":true}],"plainIndexes":[{"fieldNames":["user_id","user_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_user_mfa_factors","description":"Multi-factor authentication factor records for users, including TOTP, SMS, email challenge, or security keys. Used for MFA enforcement and account recovery. Each factor is scoped per user and user type, and only one of each factor type is active at a time per user. Strictly subsidiary; managed by system APIs.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"user_id","type":"uuid","description":"The user to whom this MFA factor belongs. Cross-table reference.","nullable":false},{"name":"user_type","type":"string","description":"Table/type discriminator for user (systemadmin, etc).","nullable":false},{"name":"factor_type","type":"string","description":"Type of MFA factor (totp, sms, email, webauthn, backup). Supports type inference in application.","nullable":false},{"name":"factor_value","type":"string","description":"Encoded value or key for the MFA factor (encrypted, as appropriate for type).","nullable":false},{"name":"priority","type":"int","description":"Sort priority/order for use during challenge (lower is primary factor).","nullable":false},{"name":"is_active","type":"boolean","description":"Indicates whether this factor is enabled for challenge.","nullable":false},{"name":"created_at","type":"datetime","description":"Create time for this MFA factor record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last modification to MFA configuration.","nullable":false}],"uniqueIndexes":[{"fieldNames":["user_id","user_type","factor_type"],"unique":true}],"plainIndexes":[{"fieldNames":["user_id","user_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_user_credentials","description":"Credential archive and metadata for user authentication events and password state history (e.g., previous password hashes, SSO credential history, rotation). Used for audit, rollback, and security. Archived credentials are never active after rotation. Strictly subsidiary stance.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"user_id","type":"uuid","description":"The associated user record for these credentials. Cross-table reference.","nullable":false},{"name":"user_type","type":"string","description":"User table/type discriminator for credentials (systemadmin, etc).","nullable":false},{"name":"credential_type","type":"string","description":"Type of credential archived (password, sso, certificate, webauthn, etc).","nullable":false},{"name":"credential_hash","type":"string","description":"Hash or encoded credential value (historical, not active).","nullable":false},{"name":"archived_at","type":"datetime","description":"Time when credential became inactive or was rotated.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when credential was first active.","nullable":false}],"uniqueIndexes":[{"fieldNames":["user_id","user_type","credential_type","credential_hash"],"unique":true}],"plainIndexes":[{"fieldNames":["user_id","user_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_user_license_verifications","description":"Professional license/NPI/status check records for users who require licensure (doctors, nurses, technicians). Reflects compliance with NPI registry or state agency and tracks last check, status, failures, and audit compliance. May be referenced from automated or manual review processes. Strictly subsidiary table.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"user_id","type":"uuid","description":"The actor undergoing credential/license check (doctor/nurse/tech). Cross-table reference.","nullable":false},{"name":"user_type","type":"string","description":"Discriminator for user/actor type (medicaldoctor/nurse/technician).","nullable":false},{"name":"license_number","type":"string","description":"License or registration number being checked. Invariant per user.","nullable":false},{"name":"license_type","type":"string","description":"Type of license/credential (medical, nurse, tech, etc).","nullable":false},{"name":"verification_status","type":"string","description":"Result of current/most recent check (valid/expired/suspended/pending).","nullable":false},{"name":"last_verified_at","type":"datetime","description":"Last time verification was attempted/recorded.","nullable":false},{"name":"suspend_reason","type":"string","description":"Reason for suspension or problem, if applicable.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp for initial check event.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp (may include failure, renewal, or audit event).","nullable":false}],"uniqueIndexes":[{"fieldNames":["user_id","user_type","license_number"],"unique":true}],"plainIndexes":[{"fieldNames":["last_verified_at"]}],"ginIndexes":[]}]},{"filename":"schema-03-patient_records.prisma","namespace":"PatientRecords","models":[{"name":"healthcare_platform_patient_records","description":"Central patient record entity representing the unique profile and clinical record anchor for a patient within the healthcare organization. This holds core patient metadata, life-cycle status, demographic data, and foreign references to the organization, department, and patient user. All EHR encounters, amendments, audit trails, and privacy controls hang off this entity. It is the root for longitudinal clinical history and compliance workflows. Searchable independently, supports soft-delete and privacy enforcement.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"department_id","type":"uuid","description":"Belonged department's {@link healthcare_platform_departments.id}.","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true},{"name":"patient_user_id","type":"uuid","description":"Belonged patient's user record {@link healthcare_platform_patients.id}.","relation":{"name":"patient","targetModel":"healthcare_platform_patients"},"unique":true,"nullable":false}],"plainFields":[{"name":"external_patient_number","type":"string","description":"External or legacy medical record number for reconciliation with upstream EMRs.","nullable":true},{"name":"full_name","type":"string","description":"Patient's legal full name for search and display. Used for GIN search.","nullable":false},{"name":"dob","type":"datetime","description":"Date of birth of the patient.","nullable":false},{"name":"gender","type":"string","description":"Patient's gender identity (self-identified, can be blank or 'undisclosed').","nullable":true},{"name":"status","type":"string","description":"Business status (active, inactive, deceased, transferred, etc).","nullable":false},{"name":"demographics_json","type":"string","description":"JSON blob for extensible structured demographic fields (race, ethnicity, language, etc).","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation datetime.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record update datetime.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp (null if active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["patient_user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["organization_id","department_id"]},{"fieldNames":["deleted_at"]}],"ginIndexes":[{"fieldName":"full_name"}]},{"name":"healthcare_platform_ehr_encounters","description":"Clinical care encounter events for a given patient record. This table captures each discrete clinical or administrative event: admission, consult, outpatient visit, telehealth, etc. Each encounter is linked to a patient record and supporting metadata fields, and independently audited for compliance. Allows direct search and filter. Entry point for attached clinical data, lab results, medical images, etc.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_record_id","type":"uuid","description":"Associated patient record {@link healthcare_platform_patient_records.id}.","relation":{"name":"patientRecord","targetModel":"healthcare_platform_patient_records"},"unique":false,"nullable":false},{"name":"provider_user_id","type":"uuid","description":"Primary provider's user id for this encounter {@link healthcare_platform_medicaldoctors.id}.","relation":{"name":"providerUser","targetModel":"healthcare_platform_medicaldoctors"},"unique":false,"nullable":false}],"plainFields":[{"name":"encounter_type","type":"string","description":"Type of the encounter (e.g., office_visit, inpatient_admission, telemedicine, emergency, etc).","nullable":false},{"name":"encounter_start_at","type":"datetime","description":"Datetime when encounter started.","nullable":false},{"name":"encounter_end_at","type":"datetime","description":"Datetime when encounter ended (or null if ongoing).","nullable":true},{"name":"status","type":"string","description":"Status of the encounter (planned, active, completed, cancelled, etc).","nullable":false},{"name":"notes","type":"string","description":"Free text encounter summary for clinical documentation.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp (null if active).","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["patient_record_id","encounter_type"]},{"fieldNames":["provider_user_id"]},{"fieldNames":["encounter_start_at"]}],"ginIndexes":[{"fieldName":"notes"}]},{"name":"healthcare_platform_ehr_versions","description":"Snapshot table holding all historical versions of a patient's EHR record at encounter level. Each EHR version captures a point-in-time clinical state for audit, compliance, and rollback. Append-only, created at each save or amendment. Includes composite foreign keys to parent encounter and submitter, and contains the full EHR JSON payload as submitted for clinical operations, audit, and regulatory review.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"ehr_encounter_id","type":"uuid","description":"Parent encounter's {@link healthcare_platform_ehr_encounters.id}.","relation":{"name":"ehrEncounter","targetModel":"healthcare_platform_ehr_encounters"},"unique":false,"nullable":false},{"name":"submitted_by_user_id","type":"uuid","description":"User who submitted/created this version {@link healthcare_platform_medicaldoctors.id}.","relation":{"name":"submittedByUser","targetModel":"healthcare_platform_medicaldoctors"},"unique":false,"nullable":false}],"plainFields":[{"name":"version_number","type":"int","description":"Sequence number for versioning within encounter.","nullable":false},{"name":"snapshot_json","type":"string","description":"JSON payload of structured EHR content at this version (immutable).","nullable":false},{"name":"reason_for_update","type":"string","description":"Reason or event triggering version update (e.g., correction, routine, regulatory, patient request).","nullable":true},{"name":"created_at","type":"datetime","description":"Version creation timestamp.","nullable":false}],"uniqueIndexes":[{"fieldNames":["ehr_encounter_id","version_number"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"healthcare_platform_record_amendments","description":"Append-only table capturing patient record amendments, corrections, or updates that require full audit and regulatory compliance. All proposed and approved changes are logged here, with actor, rationale, approval status, and direct linkage to record and/or encounter. Supports workflows for regulatory amendment, patient-initiated requests, clinical corrections, etc.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_record_id","type":"uuid","description":"Patient record being amended {@link healthcare_platform_patient_records.id}.","relation":{"name":"patientRecord","targetModel":"healthcare_platform_patient_records"},"unique":false,"nullable":false},{"name":"submitted_by_user_id","type":"uuid","description":"User who submitted the amendment {@link healthcare_platform_nurses.id} or similar role.","relation":{"name":"submittedByUser","targetModel":"healthcare_platform_nurses"},"unique":false,"nullable":false},{"name":"reviewed_by_user_id","type":"uuid","description":"Reviewer/approver's user id, if required by workflow.","relation":{"name":"reviewedByUser","targetModel":"healthcare_platform_departmentheads"},"unique":false,"nullable":true},{"name":"ehr_encounter_id","type":"uuid","description":"Targeted EHR encounter (if amendment is to a specific event) {@link healthcare_platform_ehr_encounters.id}.","relation":{"name":"ehrEncounter","targetModel":"healthcare_platform_ehr_encounters"},"unique":false,"nullable":true}],"plainFields":[{"name":"amendment_type","type":"string","description":"Type of amendment (correction, patient_request, regulatory, etc).","nullable":false},{"name":"old_value_json","type":"string","description":"Prior value (serialized JSON form, to support review/storage).","nullable":false},{"name":"new_value_json","type":"string","description":"New value (after amendment).","nullable":false},{"name":"rationale","type":"string","description":"Reason/justification submitted with amendment.","nullable":false},{"name":"approval_status","type":"string","description":"Approval status (pending, approved, rejected, null if not applicable).","nullable":true},{"name":"created_at","type":"datetime","description":"Amendment created timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["patient_record_id","amendment_type"]}],"ginIndexes":[{"fieldName":"rationale"}]},{"name":"healthcare_platform_record_audit_trails","description":"Immutable audit log table recording every user or system action on patient records and EHRs. Provides a tamper-evident record for regulatory compliance, security, and medical-legal evidence. Captures the actor, timestamp, action, before/after state, request details, and event context. Used for investigation and compliance reporting.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_record_id","type":"uuid","description":"Patient record for which event is audited {@link healthcare_platform_patient_records.id}.","relation":{"name":"patientRecord","targetModel":"healthcare_platform_patient_records"},"unique":false,"nullable":false},{"name":"actor_user_id","type":"uuid","description":"Actor user id (may be care team or admin user) for this action.","relation":{"name":"actorUser","targetModel":"healthcare_platform_medicaldoctors"},"unique":false,"nullable":false}],"plainFields":[{"name":"audit_action","type":"string","description":"Action performed (create, update, delete, access, lock, unlock, emergency_access_override, etc).","nullable":false},{"name":"event_context_json","type":"string","description":"JSON context for additional event details (e.g., client device info, session, location).","nullable":true},{"name":"before_state_json","type":"string","description":"Serialized form of entity prior to this event.","nullable":true},{"name":"after_state_json","type":"string","description":"Serialized after-event state, if updated.","nullable":true},{"name":"request_reason","type":"string","description":"User/system provided justification or trigger, if supplied.","nullable":true},{"name":"created_at","type":"datetime","description":"Audit event timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["patient_record_id","audit_action"]},{"fieldNames":["actor_user_id"]}],"ginIndexes":[{"fieldName":"request_reason"}]},{"name":"healthcare_platform_legacy_ehr_imports","description":"Support table for legacy EHR/EPR (electronic medical record) data imported from upstream/legacy EMR solutions. Serves as a cold archive; not managed directly through APIs, but needed for historical clinical/legal access. Links to patient record, stores original identifiers, import timestamp, and raw EHR JSON. Used for compliance, investigation, and data mapping but not for active workflows. Subsidiary only.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_record_id","type":"uuid","description":"Owning patient record's {@link healthcare_platform_patient_records.id}.","relation":{"name":"patientRecord","targetModel":"healthcare_platform_patient_records"},"unique":false,"nullable":false}],"plainFields":[{"name":"legacy_system_name","type":"string","description":"Source system/provider for legacy data (e.g., \"Epic\", \"Cerner\").","nullable":false},{"name":"legacy_ehr_id","type":"string","description":"Original id from source EHR (for mapping/reference).","nullable":false},{"name":"raw_ehr_json","type":"string","description":"Original EHR JSON (read-only, archival).","nullable":false},{"name":"imported_at","type":"datetime","description":"Import timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["legacy_system_name"]}],"ginIndexes":[]},{"name":"healthcare_platform_medical_images","description":"Stores metadata and references to medical images (e.g., DICOM series) associated with an EHR encounter/event. Each record points to storage URI, basic image metadata, linked patient and EHR encounter ids, with upload/creation provenance for clinical and audit workflows. Critical for radiology, imaging management, and regulatory retention.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"ehr_encounter_id","type":"uuid","description":"Owning EHR encounter's {@link healthcare_platform_ehr_encounters.id}.","relation":{"name":"ehrEncounter","targetModel":"healthcare_platform_ehr_encounters"},"unique":false,"nullable":false},{"name":"uploaded_by_user_id","type":"uuid","description":"User (typically technician) who uploaded image record.","relation":{"name":"uploadedByUser","targetModel":"healthcare_platform_technicians"},"unique":false,"nullable":false}],"plainFields":[{"name":"image_type","type":"string","description":"Type of medical image (DICOM, JPEG, PNG, etc).","nullable":false},{"name":"image_uri","type":"uri","description":"Storage URI of image file in secure system.","nullable":false},{"name":"image_metadata_json","type":"string","description":"Serialized metadata (e.g., series, study_uid, acquisition_params).","nullable":true},{"name":"created_at","type":"datetime","description":"Image upload timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["ehr_encounter_id","image_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_image_annotations","description":"Subsidiary table for user or AI-generated annotations on medical images. Each annotation references a specific image, annotation text or measurement, and the user who authored it. Serves radiology, AI diagnostics, and audit traceability needs. Not standalone business entity; governed via parent image audit.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"medical_image_id","type":"uuid","description":"Associated image record {@link healthcare_platform_medical_images.id}.","relation":{"name":"medicalImage","targetModel":"healthcare_platform_medical_images"},"unique":false,"nullable":false},{"name":"author_user_id","type":"uuid","description":"Who created/attached this annotation.","relation":{"name":"authorUser","targetModel":"healthcare_platform_technicians"},"unique":false,"nullable":false}],"plainFields":[{"name":"annotation_text","type":"string","description":"Annotation free-text or label (radiology description, measurement, or AI note).","nullable":false},{"name":"created_at","type":"datetime","description":"Annotation creation datetime.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["medical_image_id"]}],"ginIndexes":[{"fieldName":"annotation_text"}]},{"name":"healthcare_platform_lab_results","description":"Primary table for storing clinical laboratory results belonging to a given EHR encounter (e.g., blood test, result panels, PCRs). Each result is linked to an encounter and reporting lab integration. Full JSON payload captured, plus reporting status and clinical alert indicators. Key business entity for longitudinal data analysis and compliance reporting.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"ehr_encounter_id","type":"uuid","description":"Belonged encounter's {@link healthcare_platform_ehr_encounters.id}.","relation":{"name":"ehrEncounter","targetModel":"healthcare_platform_ehr_encounters"},"unique":false,"nullable":false},{"name":"lab_integration_id","type":"uuid","description":"Reporting lab integration ({@link healthcare_platform_lab_integrations.id}).","relation":{"name":"labIntegration","targetModel":"healthcare_platform_lab_integrations"},"unique":false,"nullable":false}],"plainFields":[{"name":"test_name","type":"string","description":"Name of test/panel performed.","nullable":false},{"name":"test_result_value_json","type":"string","description":"Serialized (JSON) value of result or panel (machine and units).","nullable":false},{"name":"result_flag","type":"string","description":"Clinical flag (normal, abnormal, critical, corrected, etc.).","nullable":false},{"name":"resulted_at","type":"datetime","description":"Datetime when result was officially resulted on system.","nullable":false},{"name":"status","type":"string","description":"Status (pending, completed, revised, cancelled).","nullable":false},{"name":"created_at","type":"datetime","description":"Lab result record creation timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["ehr_encounter_id","test_name"]}],"ginIndexes":[{"fieldName":"test_name"}]},{"name":"healthcare_platform_vitals","description":"Primary table for discrete patient vitals recorded during EHR encounters, e.g., temperature, pulse, respiratory rate, blood pressure, etc. Allows for high-frequency tracked data and enables analytic/alert capabilities. Each entry references encounter and submitting user. Designed for fast independent search, longitudinal analytics, and trend workflows.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"ehr_encounter_id","type":"uuid","description":"Owning encounter's {@link healthcare_platform_ehr_encounters.id}.","relation":{"name":"ehrEncounter","targetModel":"healthcare_platform_ehr_encounters"},"unique":false,"nullable":false},{"name":"recorded_by_user_id","type":"uuid","description":"User who recorded this vital sign measurement.","relation":{"name":"recordedByUser","targetModel":"healthcare_platform_nurses"},"unique":false,"nullable":false}],"plainFields":[{"name":"vital_type","type":"string","description":"Vital sign type (heart_rate, temp_c, bp_systolic, bp_diastolic, etc).","nullable":false},{"name":"vital_value","type":"double","description":"Value for the vital sign.","nullable":false},{"name":"unit","type":"string","description":"Units for the vital sign (e.g., bpm, C, mmHg).","nullable":false},{"name":"measured_at","type":"datetime","description":"Datetime when measured.","nullable":false},{"name":"created_at","type":"datetime","description":"Measurement created timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["ehr_encounter_id","vital_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_patient_privacy_flags","description":"Subsidiary table for patient-level privacy and restriction enforcement. Flags include do_not_contact, do_not_share, sensitive, etc. Not independently managed; supporting data for access control and review processes. Linked to patient record and optionally to reason or user who enabled the flag.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_record_id","type":"uuid","description":"Belongs to patient record {@link healthcare_platform_patient_records.id}.","relation":{"name":"patientRecord","targetModel":"healthcare_platform_patient_records"},"unique":false,"nullable":false},{"name":"set_by_user_id","type":"uuid","description":"User who set/approved the flag (admin, privacy officer, etc).","relation":{"name":"setByUser","targetModel":"healthcare_platform_organizationadmins"},"unique":false,"nullable":true}],"plainFields":[{"name":"privacy_flag_type","type":"string","description":"Type of flag (do_not_share, sensitive, etc).","nullable":false},{"name":"rationale","type":"string","description":"Reason for flag setting.","nullable":true},{"name":"created_at","type":"datetime","description":"Flag set timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["patient_record_id","privacy_flag_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_record_locks","description":"Subsidiary table for record-level holds, locks, or restrictions (legal, regulatory, audit investigation, etc). Linked to patient record and referencing the user/authority imposing and releasing the lock. Each entry is append-only; supports regulatory disaster recovery and legal workflows. Not a direct API business entity.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_record_id","type":"uuid","description":"The record under hold/lock {@link healthcare_platform_patient_records.id}.","relation":{"name":"patientRecord","targetModel":"healthcare_platform_patient_records"},"unique":false,"nullable":false},{"name":"set_by_user_id","type":"uuid","description":"User or authority imposing the lock.","relation":{"name":"setByUser","targetModel":"healthcare_platform_compliance_reviews","mappingName":"healthcare_platform_record_locks_of_set_by_user_id"},"unique":false,"nullable":true},{"name":"released_by_user_id","type":"uuid","description":"User or authority releasing/removing the lock.","relation":{"name":"releasedByUser","targetModel":"healthcare_platform_compliance_reviews","mappingName":"healthcare_platform_record_locks_of_released_by_user_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"lock_type","type":"string","description":"Type of lock/hold (legal, audit, pended, regulatory).","nullable":false},{"name":"lock_reason","type":"string","description":"Explanation/purpose for lock placement.","nullable":true},{"name":"locked_at","type":"datetime","description":"Lock timestamp.","nullable":false},{"name":"released_at","type":"datetime","description":"Release timestamp (null if active).","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["patient_record_id","lock_type"]}],"ginIndexes":[]},{"name":"healthcare_platform_patient_consents","description":"Patient consent/entity logging table for all issued, updated, or revoked consent statements. Each consent record links to patient record, describing type of consent (treatment, HIPAA, research, sharing, etc), key dates (granted, revoked), scope, and reference to user obtaining or witnessing consent. Provides full regulatory audit of patient privacy and data rights across the record lifecycle. May be restored or queried independently for legal or workflow need.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_record_id","type":"uuid","description":"Parent patient record {@link healthcare_platform_patient_records.id}.","relation":{"name":"patientRecord","targetModel":"healthcare_platform_patient_records"},"unique":false,"nullable":false},{"name":"obtained_by_user_id","type":"uuid","description":"User obtaining/witnessing consent (admin, staff, etc).","relation":{"name":"obtainedByUser","targetModel":"healthcare_platform_organizationadmins"},"unique":false,"nullable":true}],"plainFields":[{"name":"consent_type","type":"string","description":"Type of consent (treatment, HIPAA, research, data_sharing, etc).","nullable":false},{"name":"scope","type":"string","description":"Scope/coverage of this consent (clinical, legal, research, data_sharing, etc).","nullable":false},{"name":"granted_at","type":"datetime","description":"Datetime when consent was granted.","nullable":false},{"name":"revoked_at","type":"datetime","description":"Datetime consent was revoked, if rescinded.","nullable":true},{"name":"description_text","type":"string","description":"Explanation or patient-supplied rationale.","nullable":true}],"uniqueIndexes":[{"fieldNames":["patient_record_id","consent_type"],"unique":true}],"plainIndexes":[{"fieldNames":["granted_at"]}],"ginIndexes":[]}]},{"filename":"schema-04-scheduling.prisma","namespace":"Scheduling","models":[{"name":"healthcare_platform_appointments","description":"Stores all individual appointment events scheduled between providers and patients. Connects org, department, provider, patient, room, equipment, and appointment status.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"healthcare_platform_department_id","type":"uuid","description":"Belonged department's {@link healthcare_platform_departments.id} (nullable for org-level bookings).","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true},{"name":"provider_id","type":"uuid","description":"Scheduled provider's user assignment {@link healthcare_platform_user_org_assignments.id}.","relation":{"name":"provider","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":false},{"name":"patient_id","type":"uuid","description":"Scheduled patient's {@link healthcare_platform_patients.id}.","relation":{"name":"patient","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":false},{"name":"status_id","type":"uuid","description":"Appointment's status {@link healthcare_platform_appointment_statuses.id}.","relation":{"name":"status","targetModel":"healthcare_platform_appointment_statuses"},"unique":false,"nullable":false}],"plainFields":[{"name":"room_id","type":"uuid","description":"Linked room reservation (uuid; not a strict FK in schemareferences a room from resource registry or external table).","nullable":true},{"name":"equipment_id","type":"uuid","description":"Linked equipment reservation (uuid; not a strict FKexternal to this schema file for cross-domain use).","nullable":true},{"name":"appointment_type","type":"string","description":"Type of appointment (e.g., in-person, telemedicine).","nullable":false},{"name":"start_time","type":"datetime","description":"Start time (ISO 8601).","nullable":false},{"name":"end_time","type":"datetime","description":"End time (ISO 8601).","nullable":false},{"name":"title","type":"string","description":"Appointment title.","nullable":true},{"name":"description","type":"string","description":"Notes and instructions.","nullable":true},{"name":"recurrence_rule","type":"string","description":"Recurrence rule if repeating (RRULE).","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp (null if active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["provider_id","start_time","end_time"],"unique":true},{"fieldNames":["patient_id","start_time","end_time"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id"]},{"fieldNames":["start_time"]},{"fieldNames":["status_id"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"description"}]},{"name":"healthcare_platform_appointment_statuses","description":"Defines possible appointment states (scheduled, cancelled, confirmed, no-show, etc).","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"status_code","type":"string","description":"Unique status code (e.g., scheduled, cancelled).","nullable":false},{"name":"display_name","type":"string","description":"Human label.","nullable":false},{"name":"business_status","type":"string","description":"Workflow grouping (e.g., active/closed).","nullable":true},{"name":"sort_order","type":"int","description":"For UI/business sorting.","nullable":false}],"uniqueIndexes":[{"fieldNames":["status_code"],"unique":true}],"plainIndexes":[{"fieldNames":["sort_order"]}],"ginIndexes":[{"fieldName":"display_name"}]},{"name":"healthcare_platform_resource_schedules","description":"Master resource availability for scheduling (provider, room, equipment) using resource_type (as string) and resource_id (uuid, not strictly a FK to a model in this file; instead a polymorphic external pointer).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"resource_type","type":"string","description":"Type/category of resource (provider, room, equipment).","nullable":false},{"name":"resource_id","type":"uuid","description":"Polymorphic resource uuid  not foriegnKey in this schema. Points out to external resource (room, provider, equipment, etc.) table.","nullable":false},{"name":"available_start_time","type":"string","description":"Start of daily slot (e.g., 09:00, 24h/ISO time).","nullable":false},{"name":"available_end_time","type":"string","description":"End of daily slot (e.g., 18:00, 24h/ISO time).","nullable":false},{"name":"recurrence_pattern","type":"string","description":"Recurrence pattern (iCal, JSON or custom).","nullable":true},{"name":"exception_dates","type":"string","description":"Blackout (holiday, maintenance) dates as string or JSON.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["resource_type","resource_id","available_start_time","available_end_time"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id"]}],"ginIndexes":[]},{"name":"healthcare_platform_room_reservations","description":"Room reservations for physical rooms. Each reservation is tied to an org and a room_id uuid, which points to a resource registry or external model (not represented as a FK here).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"room_id","type":"uuid","description":"Room id (uuid only; not a FK in this component  links to room registry).","nullable":false},{"name":"reservation_start","type":"datetime","description":"Reservation start time.","nullable":false},{"name":"reservation_end","type":"datetime","description":"Reservation end time.","nullable":false},{"name":"reservation_type","type":"string","description":"Reason: appointment, admin, cleaning, maintenance, etc.","nullable":false},{"name":"appointment_id","type":"uuid","description":"Optionally link to appointment (nullable for admin blocks).","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["room_id","reservation_start","reservation_end"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id"]}],"ginIndexes":[]},{"name":"healthcare_platform_equipment_reservations","description":"Equipment bookings or maintenance blocks. Each reservation references an org and equipment_id uuid (external device/resource); not a FK in this schema.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"equipment_id","type":"uuid","description":"Equipment resource id (uuid only; not a FK in this schema).","nullable":false},{"name":"reservation_start","type":"datetime","description":"Reservation start timestamp.","nullable":false},{"name":"reservation_end","type":"datetime","description":"Reservation end timestamp.","nullable":false},{"name":"appointment_id","type":"uuid","description":"Linked appointment if equipment scheduled; nullable otherwise.","nullable":true},{"name":"reservation_type","type":"string","description":"Reason: scheduled, blocked, maintenance, etc.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["equipment_id","reservation_start","reservation_end"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id"]}],"ginIndexes":[]},{"name":"healthcare_platform_calendar_settings","description":"Stores scheduling, calendar and booking rules; may be org-wide or per-resource with resource_type (string) and resource_id (uuid, not a FK).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization reference {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"resource_type","type":"string","description":"Type of resource (org-wide, provider, room, equipment).","nullable":false},{"name":"resource_id","type":"uuid","description":"Resource id for whom the settings apply (uuid; not a FK in this schema). Nullable for org-wide.","nullable":true},{"name":"business_days","type":"string","description":"Business open days (e.g., '[\"Mon\",\"Tue\"]'), JSON string.","nullable":false},{"name":"availability_hours","type":"string","description":"Standard window (e.g., '08:00-18:00').","nullable":false},{"name":"min_lead_time_minutes","type":"int","description":"Min advance booking (minutes).","nullable":false},{"name":"min_cancel_window_minutes","type":"int","description":"Min allowed cancellation notice (minutes).","nullable":false},{"name":"blackout_dates","type":"string","description":"Blackout (holiday, etc.) dates as string/JSON.","nullable":true},{"name":"post_appointment_survey_enabled","type":"boolean","description":"Enable auto-survey after visit.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["resource_type","resource_id"],"unique":true}],"plainIndexes":[{"fieldNames":["healthcare_platform_organization_id"]}],"ginIndexes":[]},{"name":"healthcare_platform_telemedicine_sessions","description":"Manages join link, session times and attendance for virtual appointments. 1:1 with appointment if used.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"appointment_id","type":"uuid","description":"Appointment reference {@link healthcare_platform_appointments.id}.","relation":{"name":"appointment","targetModel":"healthcare_platform_appointments"},"unique":true,"nullable":false}],"plainFields":[{"name":"join_link","type":"uri","description":"Virtual session secure link.","nullable":false},{"name":"session_start","type":"datetime","description":"Session start (scheduled).","nullable":false},{"name":"session_end","type":"datetime","description":"Session end (actual/closed).","nullable":false},{"name":"provider_joined_at","type":"datetime","description":"Provider join time.","nullable":true},{"name":"patient_joined_at","type":"datetime","description":"Patient join time.","nullable":true},{"name":"session_recorded","type":"boolean","description":"If recording enabled.","nullable":false},{"name":"created_at","type":"datetime","description":"Created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["appointment_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"healthcare_platform_appointment_reminders","description":"Tracks reminder notifications sent as part of the appointment lifecycle, for SLA/notification audits. Subsidiary under appointment. Not directly user-managed; joins the linked appointment.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"appointment_id","type":"uuid","description":"Appointment reference {@link healthcare_platform_appointments.id}.","relation":{"name":"appointment","targetModel":"healthcare_platform_appointments"},"unique":false,"nullable":false}],"plainFields":[{"name":"reminder_time","type":"datetime","description":"Send time for notice.","nullable":false},{"name":"recipient_type","type":"string","description":"Recipient (patient, provider, both).","nullable":false},{"name":"recipient_id","type":"uuid","description":"Recipient user id.","nullable":false},{"name":"delivery_channel","type":"string","description":"Delivery channel: email, sms, in-app, etc.","nullable":false},{"name":"delivery_status","type":"string","description":"Notification status (sent, failed, etc).","nullable":false},{"name":"created_at","type":"datetime","description":"Created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["appointment_id","recipient_type","recipient_id","reminder_time"],"unique":true}],"plainIndexes":[{"fieldNames":["delivery_status"]}],"ginIndexes":[]},{"name":"healthcare_platform_appointment_waitlists","description":"Tracks users awaiting slot on already-filled appointments; processed within the appointment's lifecycle, not independently user-managed.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"appointment_id","type":"uuid","description":"Linked appointment {@link healthcare_platform_appointments.id}.","relation":{"name":"appointment","targetModel":"healthcare_platform_appointments"},"unique":false,"nullable":false},{"name":"patient_id","type":"uuid","description":"Waitlisted patient's reference {@link healthcare_platform_patients.id}.","relation":{"name":"patient","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":false}],"plainFields":[{"name":"join_time","type":"datetime","description":"When user requested waitlist join.","nullable":false},{"name":"status","type":"string","description":"Current status (active, promoted, removed, etc).","nullable":false},{"name":"created_at","type":"datetime","description":"Created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["appointment_id","patient_id"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[]}]},{"filename":"schema-05-billing_insurance.prisma","namespace":"BillingInsurance","models":[{"name":"healthcare_platform_billing_invoices","description":"Primary entity representing a billing invoice issued by the healthcare organization to a patient and/or payer, referencing clinical encounters and aggregating billable service items. Connected to organization, patient, billing items, payments, and claims. Uniquely identified by invoice_number per organization. Includes audit and status metadata for compliance and workflow tracking.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"patient_id","type":"uuid","description":"Patient associated {@link healthcare_platform_patients.id}.","relation":{"name":"patient","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":false},{"name":"encounter_id","type":"uuid","description":"Clinical encounter associated {@link healthcare_platform_ehr_encounters.id}.","relation":{"name":"encounter","targetModel":"healthcare_platform_ehr_encounters"},"unique":false,"nullable":true}],"plainFields":[{"name":"invoice_number","type":"string","description":"Business invoice number, unique per organization for financial tracking and reconciliation. Required for billing and audit.","nullable":false},{"name":"description","type":"string","description":"Description or purpose of the invoice. May summarize bundled services, visit, or care episode.","nullable":true},{"name":"status","type":"string","description":"Current invoice status (e.g., draft, sent, paid, overdue, canceled). Supports billing workflow, status transitions, and analytics.","nullable":false},{"name":"total_amount","type":"double","description":"Total amount due on the invoice, before adjustments and after all itemization. In base currency units (e.g., USD).","nullable":false},{"name":"currency","type":"string","description":"Invoice currency code (e.g., USD, EUR). Used for multi-currency support in multi-national deployments.","nullable":false},{"name":"due_date","type":"datetime","description":"Date and time when payment is due. Used for reminders and overdue status logic.","nullable":true},{"name":"created_at","type":"datetime","description":"Invoice creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for invoice. Updated on each material change.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete marker. When non-null, invoice is logically deleted but preserved for compliance audit.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","invoice_number"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["patient_id","status"]}],"ginIndexes":[{"fieldName":"description"}]},{"name":"healthcare_platform_billing_items","description":"Individual itemization of services or products billed on each invoicee.g., procedures, medications, supplies. References an invoice and a billing code for audit and claim support. Amounts reflect pre-adjustment business value. Managed in the context of an invoice, not directly by end users.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"invoice_id","type":"uuid","description":"Parent invoice's {@link healthcare_platform_billing_invoices.id}.","relation":{"name":"invoice","targetModel":"healthcare_platform_billing_invoices"},"unique":false,"nullable":false},{"name":"billing_code_id","type":"uuid","description":"Billing/catalog code's {@link healthcare_platform_billing_codes.id}.","relation":{"name":"billingCode","targetModel":"healthcare_platform_billing_codes"},"unique":false,"nullable":false}],"plainFields":[{"name":"description","type":"string","description":"Description of the billed item or service (free text), for clarity and downstream claim mapping.","nullable":false},{"name":"quantity","type":"int","description":"Quantity of the billed unit/service (e.g., '3 x lab test').","nullable":false},{"name":"unit_price","type":"double","description":"Business price per unit for the item/service before adjustments or discounts. Used to compute line total.","nullable":false},{"name":"total_amount","type":"double","description":"Extended line total (quantity * unit_price). Computed at entry, never pre-aggregated beyond item level. For snapshot/audit trace.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp for the billing item row.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last billing item update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete. Null unless item removed from invoice. Retained for audit.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["invoice_id"]}],"ginIndexes":[{"fieldName":"description"}]},{"name":"healthcare_platform_billing_codes","description":"Catalog of billable codes used in invoices/itemssupports ICD-10/CPT/HCPCS mapping, internal and external code management. Not modified by general users; referenced by items and claims for price, compliance, and traceability.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Business or regulatory billing code (e.g., CPT, ICD-10, service code). Unique catalog key.","nullable":false},{"name":"code_system","type":"string","description":"Defines the type/origin of the code (e.g., CPT, ICD-10, internal, HCPCS, DRG, revenue code, etc).","nullable":false},{"name":"name","type":"string","description":"Human-readable name or summary for this code.","nullable":false},{"name":"description","type":"string","description":"Detailed business/clinical description for auditors and claim mapping.","nullable":true},{"name":"active","type":"boolean","description":"Whether this code may be used in future invoices or claims. Not deleted for audit history.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp for the code row.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp for last catalog update.","nullable":false}],"uniqueIndexes":[{"fieldNames":["code","code_system"],"unique":true}],"plainIndexes":[{"fieldNames":["code"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"healthcare_platform_billing_adjustments","description":"Represents adjustments or write-offs applied to invoices or specific billing items. Can be positive (increase) or negative (discount/waiver). Used for business policy compliance, error correction, charity care, or insurance remittance difference. Linked to invoices or billing items. Managed centrally by billing staff/admins; not directly by clinical staff.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"invoice_id","type":"uuid","description":"Invoice on which adjustment is applied. May be null if applied to item only. {@link healthcare_platform_billing_invoices.id}.","relation":{"name":"invoice","targetModel":"healthcare_platform_billing_invoices"},"unique":false,"nullable":true},{"name":"item_id","type":"uuid","description":"If applicable, the specific item adjusted. {@link healthcare_platform_billing_items.id}.","relation":{"name":"item","targetModel":"healthcare_platform_billing_items"},"unique":false,"nullable":true}],"plainFields":[{"name":"adjustment_type","type":"string","description":"Business logic or financial category for adjustment (e.g., insurance, write-off, charity, coding error, patient satisfaction, etc).","nullable":false},{"name":"description","type":"string","description":"Description/reason for adjustment. Required for audit trail and compliance justification.","nullable":false},{"name":"amount","type":"double","description":"Adjustment numeric valuepositive or negative. Audited independently from invoice total.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp for adjustment creation.","nullable":false},{"name":"updated_at","type":"datetime","description":"Adjustment last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete logic; null unless adjustment reversed or retracted.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["invoice_id","item_id"]},{"fieldNames":["adjustment_type"]}],"ginIndexes":[{"fieldName":"description"}]},{"name":"healthcare_platform_billing_discount_policies","description":"Defines named discount, charity, or business policy for discounts that may be applied to invoices or items. Used to enforce consistency and approval flows; linked to actual adjustments. Only managed by organization admins.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Organization to which discount policy belongs. {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"policy_name","type":"string","description":"Business-facing display name for this discount policy (e.g., Charity, Employee, Hardship).","nullable":false},{"name":"discount_type","type":"string","description":"Type/logic for discount (e.g., percentage, fixed, sliding scale, policy code). Used in business rules to automate discounting.","nullable":false},{"name":"description","type":"string","description":"Detailed description of the policy rationale. Used for transparency with auditors and staff.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether the policy is active/available for use. Historical entries are never deleted.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp for creation.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp (e.g., rules changed).","nullable":false}],"uniqueIndexes":[{"fieldNames":["organization_id","policy_name"],"unique":true}],"plainIndexes":[],"ginIndexes":[{"fieldName":"policy_name"},{"fieldName":"description"}]},{"name":"healthcare_platform_billing_payment_plans","description":"Payment installment arrangement for invoices, supporting patient self-pay, insurance payment schedules, or internal staff agreements. Links to invoice, includes plan logic/terms and status. Managed by billing staff, visible to patients.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"invoice_id","type":"uuid","description":"Invoice for which plan is established. {@link healthcare_platform_billing_invoices.id}.","relation":{"name":"invoice","targetModel":"healthcare_platform_billing_invoices"},"unique":false,"nullable":false}],"plainFields":[{"name":"plan_type","type":"string","description":"Installment or payment plan type (e.g., self-pay, insurance, payment deferral, promissory).","nullable":false},{"name":"terms_description","type":"string","description":"Human-readable description of payment terms (e.g., amount per period, number of payments).","nullable":false},{"name":"status","type":"string","description":"Current status (e.g., active, completed, defaulted, cancelled, expired).","nullable":false},{"name":"total_amount","type":"double","description":"Total plan amounttypically matches invoice amount to be paid via schedule.","nullable":false},{"name":"start_date","type":"datetime","description":"Plan inception/start date.","nullable":false},{"name":"end_date","type":"datetime","description":"Planned or actual end date of payment plan.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp for payment plan creation.","nullable":false},{"name":"updated_at","type":"datetime","description":"Payment plan last updated timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete marker for plan archival. Null unless plan is retired/deleted from workflows.","nullable":true}],"uniqueIndexes":[{"fieldNames":["invoice_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"healthcare_platform_billing_payments","description":"Represents actual payments received against invoicesby patients, payers, or third parties. Links to invoice, payer, payment method. Tracks reconciliation status, amount, memo, audit trail. Used for financial reporting and patient account balances.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"invoice_id","type":"uuid","description":"Invoice to which payment was applied. {@link healthcare_platform_billing_invoices.id}.","relation":{"name":"invoice","targetModel":"healthcare_platform_billing_invoices"},"unique":false,"nullable":false},{"name":"payee_id","type":"uuid","description":"User/entity who made the payment (patient, org, payer, other staff). {@link healthcare_platform_patients.id} or external entity. For direct payment attribution.","relation":{"name":"payee","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":true},{"name":"payment_method_id","type":"uuid","description":"Payment method used (card, bank, external API, insurance remittance, etc). {@link healthcare_platform_billing_payment_methods.id}.","relation":{"name":"paymentMethod","targetModel":"healthcare_platform_billing_payment_methods"},"unique":false,"nullable":true}],"plainFields":[{"name":"amount","type":"double","description":"Actual payment amount recorded. Must never exceed invoice total unless corrected via adjustment.","nullable":false},{"name":"currency","type":"string","description":"Transaction currency (should match invoice, but required for reporting/audit).","nullable":false},{"name":"reference_number","type":"string","description":"External transaction, check, or remittance reference (bank or payer-specific). Used for reconciliation.","nullable":true},{"name":"payment_date","type":"datetime","description":"Date/time when payment was received/recorded (may be backdated for offline payments).","nullable":false},{"name":"memo","type":"string","description":"Free text for payment note, payer memo, or reconciliation reference.","nullable":true},{"name":"status","type":"string","description":"Current payment status (e.g., posted, pending, voided, returned, disputed, refunded). Used in revenue/accounting workflows.","nullable":false},{"name":"created_at","type":"datetime","description":"Payment creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for payment entry (including reconciliation or dispute status change).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete/archival field; null unless deleted for audit.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["invoice_id"]},{"fieldNames":["payment_date"]}],"ginIndexes":[{"fieldName":"memo"}]},{"name":"healthcare_platform_billing_payment_methods","description":"Catalog of accepted payment methods (card, ACH, insurance, check, in-person, custom 3rd party) assignable to payments. Organization admins control available options; required for payment acceptance logic and reconciliation. Not modifiable by patients/end users.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Organization that accepts this payment method. {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"method_type","type":"string","description":"Kind of method (e.g., credit_card, ach, insurance, check, cash, bank_transfer, external_service, other).","nullable":false},{"name":"provider_name","type":"string","description":"External or internal provider label (e.g., Visa, Stripe, Aetna, Company payroll).","nullable":true},{"name":"details_json","type":"string","description":"Serialized details/settings for integration (e.g., JSON params for gateways or insurance API config).","nullable":true},{"name":"is_active","type":"boolean","description":"If true, method is offered for current payments; not deleted to preserve audit trail.","nullable":false},{"name":"created_at","type":"datetime","description":"Method creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last updated timestamp (for configuration, branding, or status changes).","nullable":false}],"uniqueIndexes":[{"fieldNames":["organization_id","method_type","provider_name"],"unique":true}],"plainIndexes":[],"ginIndexes":[{"fieldName":"provider_name"}]},{"name":"healthcare_platform_insurance_policies","description":"Represents insurance policy information associated with a patient, tracked for eligibility, claim processing, and billing. Links to patient and payer entities. Used for insurance workflow and regulatory compliance. Patients may have multiple policies (primary/secondary/tertiary). Managed by organization/billing/admin staff.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"patient_id","type":"uuid","description":"Policyholder (patient/user) entity. {@link healthcare_platform_patients.id}.","relation":{"name":"patient","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":false},{"name":"organization_id","type":"uuid","description":"Owning organization for this policy (required for tenancy/data isolation). {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"policy_number","type":"string","description":"External/business policy number as provided by payer/insurer.","nullable":false},{"name":"payer_name","type":"string","description":"Insurance company/payer name (Aetna, BlueCross, etc).","nullable":false},{"name":"group_number","type":"string","description":"Payer group/panel number. Used for batch eligibility or claims where applicable.","nullable":true},{"name":"coverage_start_date","type":"datetime","description":"Coverage effective date. Business use for eligibility logic.","nullable":false},{"name":"coverage_end_date","type":"datetime","description":"Coverage end/expiration date; null if still active as of record.","nullable":true},{"name":"plan_type","type":"string","description":"Type/kind of insurance (e.g., commercial, medicare, medicaid, self-pay, worker_comp, auto, etc).","nullable":false},{"name":"policy_status","type":"string","description":"Status of the policy (e.g., active, inactive, expired, pending verification).","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp for policy record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Most recent update/verification of this policy.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-deletion field; retained for data retention and compliance. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["policy_number","payer_name","organization_id"],"unique":true}],"plainIndexes":[{"fieldNames":["patient_id"]},{"fieldNames":["organization_id"]}],"ginIndexes":[{"fieldName":"payer_name"}]},{"name":"healthcare_platform_insurance_eligibility_checks","description":"Represents an eligibility check transaction against a payer/insurer to verify active coverage for a patient and policy. Used for compliance prior to billing, encounter, or appointment workflows. Tracks API or manual responses and audit data. Important for appeals and claim status tracking. Managed by staff, not patient.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"insurance_policy_id","type":"uuid","description":"Insurance policy checked. {@link healthcare_platform_insurance_policies.id}.","relation":{"name":"insurancePolicy","targetModel":"healthcare_platform_insurance_policies"},"unique":false,"nullable":false},{"name":"performed_by_id","type":"uuid","description":"User or staff responsible for the check/entry. {@link healthcare_platform_user_org_assignments.id} or other staff id.","relation":{"name":"performedBy","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true}],"plainFields":[{"name":"check_timestamp","type":"datetime","description":"Date/time eligibility was checked (when request sent, API called, or form submitted).","nullable":false},{"name":"status","type":"string","description":"Outcome of eligibility (e.g., verified, not_covered, expired, pending, error, partial).","nullable":false},{"name":"payer_response_code","type":"string","description":"Code returned by payer/clearinghouse; reflects eligibility check business outcome.","nullable":true},{"name":"payer_response_description","type":"string","description":"Human-readable description/response from payer or integration API. Used for downstream audit or appeals.","nullable":true},{"name":"created_at","type":"datetime","description":"Eligibility check creation timestamp (system entry/audit trail).","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update (may reflect appeals, corrections, supplemental documentation).","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["insurance_policy_id"]},{"fieldNames":["check_timestamp"]}],"ginIndexes":[{"fieldName":"payer_response_description"}]},{"name":"healthcare_platform_insurance_claims","description":"Represents principal insurance claim submission and lifecycle/updates for an invoice or encounter under a patient's insurance policy. Tracks payer, submission/ref num, claim status, and links to billing codes. Used in appeals, financial reconciliation, and compliance audits. Managed by billing staff and org admins.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"insurance_policy_id","type":"uuid","description":"Policy under which claim was submitted. {@link healthcare_platform_insurance_policies.id}.","relation":{"name":"insurancePolicy","targetModel":"healthcare_platform_insurance_policies"},"unique":false,"nullable":false},{"name":"invoice_id","type":"uuid","description":"Invoice to which claim relates. {@link healthcare_platform_billing_invoices.id}.","relation":{"name":"invoice","targetModel":"healthcare_platform_billing_invoices"},"unique":false,"nullable":false}],"plainFields":[{"name":"claim_number","type":"string","description":"Unique business/clearinghouse reference for claim submission.","nullable":false},{"name":"service_start_date","type":"datetime","description":"Date service(s) started  for payer coverage logic and audit.","nullable":false},{"name":"service_end_date","type":"datetime","description":"Date service(s) ended  for payer logic (may match start for single-day).","nullable":true},{"name":"total_claimed_amount","type":"double","description":"Total amount claimed on the invoice after adjustments, in base currency.","nullable":false},{"name":"submission_status","type":"string","description":"Status in payer/claim workflow (e.g., submitted, received, accepted, denied, pending, needs_info, paid, rejected, cancelled).","nullable":false},{"name":"last_payer_response_code","type":"string","description":"Last payer/clearinghouse status code or response indicating claim disposition/status.","nullable":true},{"name":"last_payer_response_description","type":"string","description":"Full text (or summary) of last payer/clearinghouse/status response; used for diagnostic, appeals, audit.","nullable":true},{"name":"created_at","type":"datetime","description":"Claim record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Claim record last update (may be status, response, doc upload, resubmission).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-deletion field for compliance. Null unless removed from standard workflows but always retained for audit.","nullable":true}],"uniqueIndexes":[{"fieldNames":["claim_number"],"unique":true}],"plainIndexes":[{"fieldNames":["insurance_policy_id"]},{"fieldNames":["invoice_id"]}],"ginIndexes":[{"fieldName":"last_payer_response_description"}]},{"name":"healthcare_platform_insurance_claim_statuses","description":"Captures status updates, result codes, and documentation of claim status changes through the payer, clearinghouse, or internal workflows. Supports multi-step status tracking for claims, appeals, and compliance review. Linked to insurance_claim. Not directly managed by end users. Created and updated by staff actions, payer API responses, or scripts.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"claim_id","type":"uuid","description":"Main claim being tracked. {@link healthcare_platform_insurance_claims.id}.","relation":{"name":"claim","targetModel":"healthcare_platform_insurance_claims"},"unique":false,"nullable":false},{"name":"updated_by_id","type":"uuid","description":"Org user/staff who recorded the status event. {@link healthcare_platform_user_org_assignments.id}.","relation":{"name":"updatedBy","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true}],"plainFields":[{"name":"status_code","type":"string","description":"Payer, clearinghouse, or internal status code associated with this claim status update. Critical for audit/compliance.","nullable":false},{"name":"status_description","type":"string","description":"Detailed description or free text for current claim status reason. Used for user workflow, remediation, or appeals.","nullable":false},{"name":"payment_amount","type":"double","description":"Amount (if any) paid at this status (e.g., partial payment, adjustment, supplemental).","nullable":true},{"name":"status_timestamp","type":"datetime","description":"When this claim status was recorded/received (payer API or staff action).","nullable":false},{"name":"created_at","type":"datetime","description":"Claim status tracking entry creation timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["claim_id"]},{"fieldNames":["status_code"]}],"ginIndexes":[{"fieldName":"status_description"}]},{"name":"healthcare_platform_financial_audit_logs","description":"Comprehensive audit logging for all financial/billing/insurance events, recording the who/when/what/why for regulatory, SOC 2, and HIPAA compliance. Tracks all user/payment/adjustment/claim/invoice edits, status changes, and access events. Never deleted or modified except by compliance admin per retention policy. Not user-editable.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Organization context for audit log. {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"entity_id","type":"uuid","description":"ID of the business entity affected (invoice/item/payment/claim/etc). May be null for generic audit events.","relation":{"name":"affectedEntity","targetModel":"healthcare_platform_billing_invoices"},"unique":false,"nullable":true},{"name":"user_id","type":"uuid","description":"User performing or triggering the audited event. {@link healthcare_platform_user_org_assignments.id}.","relation":{"name":"user","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true}],"plainFields":[{"name":"entity_type","type":"string","description":"Type of business entity affected (e.g., invoice, payment, claim, item, adjustment, policy, etc).","nullable":false},{"name":"audit_action","type":"string","description":"Nature of the audited action (e.g., create, update, delete, access, payment_post, claim_submit, refund, adjustment, status_change, compliance_export, etc).","nullable":false},{"name":"action_description","type":"string","description":"Human-readable explanation and context for the audit log; may include rationale, business context, before/after values as applicable.","nullable":true},{"name":"action_timestamp","type":"datetime","description":"Date/time when event occurred (may differ from created_at if backfilled or imported for legacy audit log).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when audit log entry was created (system entry).","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["organization_id"]},{"fieldNames":["entity_type"]},{"fieldNames":["user_id"]}],"ginIndexes":[{"fieldName":"action_description"}]}]},{"filename":"schema-06-analytics_decision_support.prisma","namespace":"AnalyticsDecisionSupport","models":[{"name":"healthcare_platform_analytics_dashboards","description":"Analytics dashboard definitions. Represents user- or organization-saved dashboard configurations for analytics. Defines layout, selected widgets, settings, and sharing (public, private, org, department). Users and departments are linked for access/ownership. Used to render web dashboards and store configurations over time.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"owner_user_id","type":"uuid","description":"Dashboard owner's {@link healthcare_platform_user_org_assignments.id}.","relation":{"name":"ownerUser","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":false},{"name":"organization_id","type":"uuid","description":"Organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"department_id","type":"uuid","description":"Optional department's {@link healthcare_platform_departments.id} for department-scoped dashboards.","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true}],"plainFields":[{"name":"title","type":"string","description":"Dashboard title for display/search. User-friendly name.","nullable":false},{"name":"description","type":"string","description":"Detailed description of dashboard purpose/configuration.","nullable":true},{"name":"config_json","type":"string","description":"Serialized dashboard widgets/layout/settings (JSON string).","nullable":false},{"name":"is_public","type":"boolean","description":"Whether the dashboard is public to the organization/department or only to the owner.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","title"],"unique":true}],"plainIndexes":[{"fieldNames":["owner_user_id","created_at"]},{"fieldNames":["organization_id","department_id"]}],"ginIndexes":[{"fieldName":"title"}]},{"name":"healthcare_platform_analytics_reports","description":"Analytics report templates and saved report definitions. Used for building, customizing, and running parameterized organization/department/user-scoped analytics reports, including clinical, operational, and compliance dashboards. Includes search metadata and links to dashboard/catalogs.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"created_by_user_id","type":"uuid","description":"User's {@link healthcare_platform_user_org_assignments.id} who created the report.","relation":{"name":"createdByUser","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":false},{"name":"organization_id","type":"uuid","description":"Organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"department_id","type":"uuid","description":"Optional department's {@link healthcare_platform_departments.id} for department-scoped reports.","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true}],"plainFields":[{"name":"name","type":"string","description":"Report template name (unique per org).","nullable":false},{"name":"description","type":"string","description":"Report description and usage context.","nullable":true},{"name":"template_config_json","type":"string","description":"Parameter/model/configuration for rendering this report (JSON).","nullable":false},{"name":"is_active","type":"boolean","description":"Whether this template is currently active (available to users).","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_by_user_id","created_at"]},{"fieldNames":["organization_id","department_id"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"healthcare_platform_dashboard_preferences","description":"Saved preferences for dashboard settings per user per dashboard. Supports theme/layout/display customizations and last-view state for returning sessions. Used for restoring user context and personalization.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"dashboard_id","type":"uuid","description":"Dashboard's {@link healthcare_platform_analytics_dashboards.id}.","relation":{"name":"dashboard","targetModel":"healthcare_platform_analytics_dashboards"},"unique":false,"nullable":false},{"name":"user_id","type":"uuid","description":"User's {@link healthcare_platform_user_org_assignments.id} who owns these preferences.","relation":{"name":"user","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":false}],"plainFields":[{"name":"preferences_json","type":"string","description":"Serialized preferences (theme, layout, filters, widget state, etc, JSON string).","nullable":false},{"name":"last_viewed_at","type":"datetime","description":"Most recent dashboard view date/time.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["dashboard_id","user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["user_id","last_viewed_at"]}],"ginIndexes":[]},{"name":"healthcare_platform_decision_support_rules","description":"Catalog of clinical decision support (CDS) logic rules. Each record represents a single best-practice, clinical alert, or guideline rule, supporting real-time patient safety and operational logic (e.g., drug interaction check, critical lab value alert, documentation prompt). Used at runtime for CDS execution and supports status/disabling.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Owning organization's {@link healthcare_platform_organizations.id} for organization-specific rules.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"rule_code","type":"string","description":"Unique code/identifier for this rule within the org.","nullable":false},{"name":"title","type":"string","description":"Name/title of decision support rule (user-friendly).","nullable":false},{"name":"description","type":"string","description":"Detailed description of rule logic and intent.","nullable":true},{"name":"trigger_event","type":"string","description":"What system event or data change triggers this rule (e.g., 'medication_prescribed', 'lab_result_posted').","nullable":false},{"name":"expression_json","type":"string","description":"Serialized logic or expression for evaluation (JSON/DSL, never store code here).","nullable":false},{"name":"is_enabled","type":"boolean","description":"Controls whether rule is currently being executed by CDS engine.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","rule_code"],"unique":true}],"plainIndexes":[{"fieldNames":["organization_id","is_enabled"]}],"ginIndexes":[{"fieldName":"title"}]},{"name":"healthcare_platform_clinical_alerts","description":"Generated clinical decision support (CDS) alerts, events, and notifications for patient care, compliance, or workflow outcomes. Tracks lifecycle (new, viewed, acknowledged, resolved), links to originating CDS rule and relevant user(s), supports alert assignment, status, acknowledgments, and timestamps. Used for patient safety and audit workflows.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"decision_support_rule_id","type":"uuid","description":"Originating CDS rule's {@link healthcare_platform_decision_support_rules.id}.","relation":{"name":"decisionSupportRule","targetModel":"healthcare_platform_decision_support_rules"},"unique":false,"nullable":false},{"name":"triggered_by_user_id","type":"uuid","description":"User's {@link healthcare_platform_user_org_assignments.id} who triggered this alert or is responsible for response.","relation":{"name":"triggeredByUser","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true},{"name":"organization_id","type":"uuid","description":"Alert's organization {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"department_id","type":"uuid","description":"Alert's department, if relevant, {@link healthcare_platform_departments.id}.","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true}],"plainFields":[{"name":"alert_type","type":"string","description":"Type of alert/event (e.g., warning, error, recommendation, info, compliance).","nullable":false},{"name":"subject_summary","type":"string","description":"Short summary of what this alert is about (may reference patient, event, or process).","nullable":false},{"name":"detail","type":"string","description":"Detailed alert content/body/message.","nullable":true},{"name":"status","type":"string","description":"Workflow state of this alert (e.g., new, viewed, acknowledged, resolved, escalated).","nullable":false},{"name":"acknowledged_at","type":"datetime","description":"Timestamp when user acknowledged this alert.","nullable":true},{"name":"resolved_at","type":"datetime","description":"Timestamp alert was resolved/closed.","nullable":true},{"name":"created_at","type":"datetime","description":"Alert creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-deletion marker for alert archiving.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["organization_id","department_id","status"]},{"fieldNames":["triggered_by_user_id","created_at"]}],"ginIndexes":[{"fieldName":"subject_summary"}]},{"name":"healthcare_platform_outcome_metrics","description":"Organization/cohort/department outcome metrics time-series registry. Captures outcome variable (name, configuration, cohort/department), timestamps, and metric value for targeted/benchmarking analytics and quality improvement. Used for longitudinal performance and quality tracking in outcomes dashboards.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Owning organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"department_id","type":"uuid","description":"Target department's {@link healthcare_platform_departments.id} (optional for cross-department or org-level metrics).","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true}],"plainFields":[{"name":"metric_name","type":"string","description":"Outcome metric/variable name (e.g., readmission_rate, infection_rate).","nullable":false},{"name":"description","type":"string","description":"Outcome metric definition and inclusion rules.","nullable":true},{"name":"cohort_definition_json","type":"string","description":"Serialized cohort inclusion definition (JSON or similar).","nullable":false},{"name":"observed_value","type":"double","description":"Observed value for this metric and timepoint.","nullable":false},{"name":"observed_at","type":"datetime","description":"Timepoint this metric value was observed or recorded.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp for this record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete marker for this row.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","metric_name","observed_at"],"unique":true}],"plainIndexes":[{"fieldNames":["department_id","observed_at"]}],"ginIndexes":[{"fieldName":"metric_name"}]},{"name":"healthcare_platform_benchmark_definitions","description":"Reference table for analytic benchmarks and standard performance thresholds (e.g., national, regional, payer, or custom-defined). Used to normalize and compare outcome metrics/KPIs across organizations or time periods. Populated by admins or via integration for benchmarking dashboards. Typically referenced from outcome_metrics or KPI snapshots.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Owning organization's {@link healthcare_platform_organizations.id}, or null if globally defined.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":true}],"plainFields":[{"name":"benchmark_code","type":"string","description":"Short programmatic code for this benchmark (e.g., 'NAT_AVG_23').","nullable":false},{"name":"label","type":"string","description":"Human-friendly label for this benchmark (e.g., '2023 National Average').","nullable":false},{"name":"description","type":"string","description":"Detailed description of what this benchmark represents, scenario, or data source.","nullable":true},{"name":"value","type":"double","description":"Benchmark value (target or average).","nullable":false},{"name":"unit","type":"string","description":"Measurement unit for normalization (e.g., percent, per_1000, score, seconds).","nullable":false},{"name":"effective_start_at","type":"datetime","description":"When this benchmark becomes active/valid.","nullable":false},{"name":"effective_end_at","type":"datetime","description":"When this benchmark is no longer valid.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-deletion marker.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","benchmark_code"],"unique":true}],"plainIndexes":[{"fieldNames":["label","effective_start_at"]}],"ginIndexes":[{"fieldName":"label"}]},{"name":"healthcare_platform_kpi_snapshots","description":"Materialized time-series of KPI (key performance indicator) calculations per organization/department for analytics dashboards. Each record represents a computed value for a KPI at a given time, with configuration, reference/benchmark links, and metadata. Supports trend analysis and dashboard rendering.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"department_id","type":"uuid","description":"Target department's {@link healthcare_platform_departments.id} (nullable for organization-level KPIs).","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true},{"name":"benchmark_id","type":"uuid","description":"Reference's {@link healthcare_platform_benchmark_definitions.id}; the benchmark to compare against (optional).","relation":{"name":"benchmark","targetModel":"healthcare_platform_benchmark_definitions"},"unique":false,"nullable":true}],"plainFields":[{"name":"kpi_name","type":"string","description":"Programmatic name/identifier for the KPI (unique per org).","nullable":false},{"name":"label","type":"string","description":"Display label for KPI (shown in dashboards).","nullable":false},{"name":"description","type":"string","description":"KPI calculation logic/meaning.","nullable":true},{"name":"calculation_config_json","type":"string","description":"Serialized detail of calculation method, filter, cohort, and normalization parameters (JSON string).","nullable":false},{"name":"value","type":"double","description":"Observed KPI value at this timepoint.","nullable":false},{"name":"recorded_at","type":"datetime","description":"Timestamp this snapshot represents (may be start, end, or point in reporting period).","nullable":false},{"name":"created_at","type":"datetime","description":"Row creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Row last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","kpi_name","recorded_at"],"unique":true}],"plainIndexes":[{"fieldNames":["department_id","recorded_at"]}],"ginIndexes":[{"fieldName":"label"}]}]},{"filename":"schema-07-integration.prisma","namespace":"Integration","models":[{"name":"healthcare_platform_external_emr_connectors","description":"Defines external EMR/EHR connector adapters (e.g. Epic, Cerner, AllScripts) configured for each organization. Captures connection metadata, status, and mapping linkage to supported integration types. Separation at org level ensures compliance and audit boundaries. Related to {@link healthcare_platform_organizations.id}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"connector_type","type":"string","description":"Vendor/platform identifier (e.g. 'Epic', 'Cerner', 'AllScripts', or custom type).","nullable":false},{"name":"connection_uri","type":"uri","description":"Connection URI or endpoint for the EMR/EHR API.","nullable":false},{"name":"status","type":"string","description":"Operational status of the connector (e.g. 'active', 'pending', 'failed', 'disabled').","nullable":false},{"name":"last_sync_at","type":"datetime","description":"Time of most recent successful data sync through this connector.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp (null if active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","connector_type"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"connector_type"}]},{"name":"healthcare_platform_lab_integrations","description":"Configuration per organization for integrated laboratory providers (e.g., LabCorp, Quest). Contains connection info, provider code, supported order/result formats, and operational status. Related to {@link healthcare_platform_organizations.id}. Enables role/tenant isolation for inbound and outbound lab workflows.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"lab_vendor_code","type":"string","description":"External lab provider code (e.g., 'LabCorp', 'Quest', custom).","nullable":false},{"name":"connection_uri","type":"uri","description":"Primary endpoint URI for lab system API.","nullable":false},{"name":"supported_message_format","type":"string","description":"Supported message/document type (e.g., HL7, FHIR, C-CDA).","nullable":false},{"name":"status","type":"string","description":"Integration status for this lab provider (e.g., 'active', 'disabled', 'pending').","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp (null if active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","lab_vendor_code"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"lab_vendor_code"}]},{"name":"healthcare_platform_lab_order_transactions","description":"Tracks all outbound lab order transmissions to external providers, mapped to the originating organization and optionally linked to the EHR encounter or lab order. Ensures trace and audit trail for each order, with status and error fields for sync result. Related to {@link healthcare_platform_organizations.id}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization sending the lab order {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"lab_integration_id","type":"uuid","description":"Lab integration used for transaction {@link healthcare_platform_lab_integrations.id}.","relation":{"name":"labIntegration","targetModel":"healthcare_platform_lab_integrations"},"unique":false,"nullable":false}],"plainFields":[{"name":"external_lab_order_id","type":"string","description":"External/lab system provided order ID for reconciliation.","nullable":true},{"name":"status","type":"string","description":"Transmission status (e.g., 'created','sent','acknowledged','failed').","nullable":false},{"name":"status_message","type":"string","description":"Additional information or error detail regarding transmission/processing status.","nullable":true},{"name":"requested_at","type":"datetime","description":"Time the order was created within healthcarePlatform.","nullable":false},{"name":"transmitted_at","type":"datetime","description":"Timestamp lab order was sent to external system.","nullable":true},{"name":"acknowledged_at","type":"datetime","description":"Timestamp for external system acknowledgement, if received.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp (audit trail).","nullable":false},{"name":"updated_at","type":"datetime","description":"Last transaction update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[]},{"name":"healthcare_platform_lab_result_imports","description":"Captures all inbound external lab result imports, per organization and lab provider. Provides immutable audit trail of external payload, parsing status, and linkages to core clinical data. Related to {@link healthcare_platform_organizations.id}, links to originating lab integration.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Receiving organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"lab_integration_id","type":"uuid","description":"Lab integration related to import {@link healthcare_platform_lab_integrations.id}.","relation":{"name":"labIntegration","targetModel":"healthcare_platform_lab_integrations"},"unique":false,"nullable":false}],"plainFields":[{"name":"raw_payload_reference","type":"uri","description":"URI or blob reference to the raw inbound result (for audit/troubleshooting).","nullable":false},{"name":"parsed_status","type":"string","description":"Parsing outcome (e.g., 'parsed','error','partial').","nullable":false},{"name":"parsed_message","type":"string","description":"Parsing detail, including error context if any.","nullable":true},{"name":"imported_at","type":"datetime","description":"Timestamp of import attempt.","nullable":false},{"name":"created_at","type":"datetime","description":"Entry creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["parsed_status"]}],"ginIndexes":[]},{"name":"healthcare_platform_pharmacy_integrations","description":"Defines ePrescribing/pharmacy network integrations for each organization. Includes API endpoint, provider/vendor identifiers, supported protocols, and status tracking. Related to {@link healthcare_platform_organizations.id}. Enables role/tenant isolation for eRx messaging.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"pharmacy_vendor_code","type":"string","description":"Identifier of external pharmacy network/provider (e.g., 'Surescripts', 'NCPDP', custom).","nullable":false},{"name":"connection_uri","type":"uri","description":"eRx API endpoint URI.","nullable":false},{"name":"supported_protocol","type":"string","description":"Communication protocol or standard supported (e.g., 'NCPDP', 'FHIR', HL7 batch/message, etc.).","nullable":false},{"name":"status","type":"string","description":"Integration status (e.g., 'active','pending','failed').","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","pharmacy_vendor_code"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"pharmacy_vendor_code"}]},{"name":"healthcare_platform_pharmacy_transactions","description":"Tracks all outbound and inbound ePrescription transactions with external pharmacy networks for audit and traceability. Links to the originating organization and configured pharmacy integration. Stores transaction payload reference, status, and errors. Related to {@link healthcare_platform_organizations.id}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"pharmacy_integration_id","type":"uuid","description":"Pharmacy integration for the transaction {@link healthcare_platform_pharmacy_integrations.id}.","relation":{"name":"pharmacyIntegration","targetModel":"healthcare_platform_pharmacy_integrations"},"unique":false,"nullable":false}],"plainFields":[{"name":"transaction_type","type":"string","description":"Pharmacy operation performed (e.g., 'new eRx', 'refill', 'cancel', 'status_query').","nullable":false},{"name":"external_transaction_id","type":"string","description":"Identifier assigned by external pharmacy network/system.","nullable":true},{"name":"status","type":"string","description":"Transaction status ('pending', 'sent', 'acknowledged', 'error', etc.).","nullable":false},{"name":"status_message","type":"string","description":"Additional message or error info associated with transaction.","nullable":true},{"name":"payload_reference","type":"uri","description":"Pointer/URI to stored payload (for troubleshooting/audit).","nullable":true},{"name":"requested_at","type":"datetime","description":"Timestamp when the transaction was triggered.","nullable":false},{"name":"transmitted_at","type":"datetime","description":"Timestamp when sent to external network.","nullable":true},{"name":"acknowledged_at","type":"datetime","description":"Timestamp of acknowledgement from pharmacy/external system.","nullable":true},{"name":"created_at","type":"datetime","description":"Entry creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[]},{"name":"healthcare_platform_insurance_api_integrations","description":"Per-organization insurance platform API configuration for real-time eligibility verification and claims. Stores API URIs, vendor identifiers, credential linkage, supported transaction types, and status. Related to {@link healthcare_platform_organizations.id}. Enables strict role/tenant boundary for payer connectivity.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"insurance_vendor_code","type":"string","description":"Insurance payer or clearinghouse code (e.g., 'UHC', 'Aetna', 'Humana').","nullable":false},{"name":"connection_uri","type":"uri","description":"API endpoint for real-time eligibility or claim submission.","nullable":false},{"name":"supported_transaction_types","type":"string","description":"Comma-separated supported transaction types (e.g., 'eligibility,claims,realtime').","nullable":false},{"name":"status","type":"string","description":"Connector status (e.g. 'active','test','failed').","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","insurance_vendor_code"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"insurance_vendor_code"}]},{"name":"healthcare_platform_device_data_ingestions","description":"Describes configured ingestion routes for medical device data (e.g., monitors, diagnostic equipment) per organization. Captures ingestion endpoint, device type, supported protocol, and operational status. Related to {@link healthcare_platform_organizations.id}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"device_type","type":"string","description":"Device/system type for ingestion (e.g., 'vital_monitor', 'infusion_pump', 'ecg').","nullable":false},{"name":"ingest_endpoint_uri","type":"uri","description":"Ingestion endpoint for the device feed/API.","nullable":false},{"name":"supported_protocol","type":"string","description":"Communication/protocol standard supported (e.g. 'HL7', 'FHIR', 'custom').","nullable":false},{"name":"status","type":"string","description":"Ingestion route status (e.g. 'ready','pending','error').","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft-delete timestamp.","nullable":true}],"uniqueIndexes":[{"fieldNames":["healthcare_platform_organization_id","device_type"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"device_type"}]},{"name":"healthcare_platform_integration_logs","description":"General-purpose log for all integration-related successes, errors, or status events. Can reference any integration/transaction as needed (by uuid and metadata). Used for audit, troubleshooting, and compliance. Queryable by org, integration type, and time window. Related to {@link healthcare_platform_organizations.id}.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"healthcare_platform_organization_id","type":"uuid","description":"Organization for which event occurred. {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"integration_type","type":"string","description":"Type of integration for this event (e.g., 'emr', 'lab', 'pharmacy', 'insurance', 'device').","nullable":false},{"name":"referenced_transaction_id","type":"uuid","description":"Related integration transaction or object (nullable for generic logs).","nullable":true},{"name":"event_status","type":"string","description":"Event status (e.g., 'success','failure','timeout','retry').","nullable":false},{"name":"event_code","type":"string","description":"Short status/error code (e.g., 'E_CONN', 'E_PARSE', 'OK').","nullable":false},{"name":"event_message","type":"string","description":"Verbose event description, error details, or stack trace (if any).","nullable":true},{"name":"occurred_at","type":"datetime","description":"Event occurrence timestamp.","nullable":false},{"name":"created_at","type":"datetime","description":"Entry creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["event_status"]},{"fieldNames":["integration_type","occurred_at"]}],"ginIndexes":[{"fieldName":"event_message"}]}]},{"filename":"schema-08-compliance_consents.prisma","namespace":"ComplianceConsents","models":[{"name":"healthcare_platform_compliance_consents","description":"Tracks all explicit, time-stamped, versioned consents given by patients or staff members for compliance-sensitive actions, policies, or data processing. References the organization, subject (e.g., patient or staff), the matching policy version, and records full consent/revocation lifecycle for audit. Can cover any consented business area (e.g., privacy, treatment, data use). Distinct from agreementsconsents are narrowly scoped, explicitly granted, and can be revoked.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"subject_id","type":"uuid","description":"ID of the consenting subject (user or patient). References patients or staff depending on context. Foreign key to either {@link healthcare_platform_patients.id} or {@link healthcare_platform_user_org_assignments.id}.","relation":{"name":"subject","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":true},{"name":"policy_version_id","type":"uuid","description":"Associated policy version's {@link healthcare_platform_policy_versions.id}. Captures which version of the policy this consent applies to.","relation":{"name":"policyVersion","targetModel":"healthcare_platform_policy_versions"},"unique":false,"nullable":false}],"plainFields":[{"name":"consent_type","type":"string","description":"Type/category of consent (e.g., privacy, treatment, research, data processing).","nullable":false},{"name":"granted","type":"boolean","description":"Whether consent is currently granted (true) or revoked (false).","nullable":false},{"name":"consent_at","type":"datetime","description":"Timestamp when consent was explicitly granted.","nullable":false},{"name":"revoked_at","type":"datetime","description":"Timestamp when consent was explicitly revoked, if applicable; null if still active.","nullable":true},{"name":"revocation_reason","type":"string","description":"Reason for revocation, if provided (required for audit if consent is revoked).","nullable":true},{"name":"expires_at","type":"datetime","description":"Expiration timestamp if consent is time-bound (e.g., research). Optional.","nullable":true},{"name":"created_at","type":"datetime","description":"Consent record creation timestamp (for audit trail).","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for this consent record. Required for audit.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp for soft deletion (for compliance recovery, not physical deletion).","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","subject_id","policy_version_id","consent_type"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["subject_id"]}],"ginIndexes":[{"fieldName":"consent_type"}]},{"name":"healthcare_platform_compliance_agreements","description":"Logs all one-time or periodic signed compliance/legal agreements (e.g., user terms, business associate agreements, HIPAA acknowledgments) by staff or patients. Includes versioned agreement to specific policies and captures agreement status, method, and sign-off details for audit/compliance, distinct from narrowly scoped dynamic consents.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"signer_id","type":"uuid","description":"ID of user or patient signing the agreement (references staff or patient).","relation":{"name":"signer","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":true},{"name":"policy_version_id","type":"uuid","description":"Versioned policy's {@link healthcare_platform_policy_versions.id} for the agreement.","relation":{"name":"policyVersion","targetModel":"healthcare_platform_policy_versions"},"unique":false,"nullable":false}],"plainFields":[{"name":"agreement_type","type":"string","description":"Type of compliance agreement (e.g., HIPAA, data use, terms of service, research agreement).","nullable":false},{"name":"status","type":"string","description":"Current status (e.g., signed, pending, withdrawn, expired, rejected).","nullable":false},{"name":"signed_at","type":"datetime","description":"When the agreement was signed. Required for completed agreements.","nullable":true},{"name":"method","type":"string","description":"How agreement was captured/acknowledged (e.g., digital signature, checkbox, wet signature, etc.).","nullable":true},{"name":"expires_at","type":"datetime","description":"Optional expiration if the agreement is not perpetual.","nullable":true},{"name":"created_at","type":"datetime","description":"Agreement record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Agreement record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp (for audit/recovery purposes).","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","signer_id","policy_version_id","agreement_type"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"agreement_type"}]},{"name":"healthcare_platform_policy_versions","description":"Maintains a full change history of compliance policy documents (e.g., privacy, terms, risk procedures). Each row is a specific, immutable version of a policy, used as a reference by consents and agreements for legal/audit traceability. Contains policy type, effective/expire timestamps, and policy document content/URI references. Modified only via explicit version update actions.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"policy_type","type":"string","description":"Policy category (e.g., privacy, HIPAA, risk management, data retention).","nullable":false},{"name":"version","type":"string","description":"Policy version label (semantic or document version). E.g., 'v2.1', '2024-06', etc.","nullable":false},{"name":"effective_at","type":"datetime","description":"Policy version's effective start timestamp.","nullable":false},{"name":"expires_at","type":"datetime","description":"Policy version's expiration, if any, else null.","nullable":true},{"name":"title","type":"string","description":"Human-readable policy/document title or headline.","nullable":false},{"name":"document_uri","type":"uri","description":"URI or external link to canonical policy document (PDF, HTML).","nullable":false},{"name":"document_hash","type":"string","description":"Optional hash of the document for immutability/audit purposes.","nullable":true},{"name":"created_at","type":"datetime","description":"Policy version record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Policy version record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Policy version soft deletion timestamp (for legal retention, not physical removal).","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","policy_type","version"],"unique":true}],"plainIndexes":[{"fieldNames":["effective_at"]}],"ginIndexes":[{"fieldName":"title"}]},{"name":"healthcare_platform_risk_assessments","description":"Tracks all required and periodic risk assessments conducted by organizations or departments for compliance (HIPAA, SOC2, internal). Each record contains who assessed, scope, method, risk level, status, window, and resulting recommendations. Supports scheduling and audit linkage. Assessment reviews are stored separately for independence and audit granularity.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"assessor_id","type":"uuid","description":"Conducting staff member's {@link healthcare_platform_user_org_assignments.id}.","relation":{"name":"assessor","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true},{"name":"department_id","type":"uuid","description":"Scoped department's {@link healthcare_platform_departments.id} if applicable.","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true}],"plainFields":[{"name":"assessment_type","type":"string","description":"Type of risk assessment (e.g., annual, incident, ad hoc, post-breach).","nullable":false},{"name":"status","type":"string","description":"Assessment status (e.g., scheduled, in_progress, completed, approved, rejected).","nullable":false},{"name":"methodology","type":"string","description":"Description of assessment methodology/process followed (e.g., NIST CSF, HIPAA Security Rule, etc.).","nullable":false},{"name":"risk_level","type":"string","description":"Risk level determined (e.g., low, moderate, high, critical).","nullable":false},{"name":"window_start","type":"datetime","description":"Assessment period start timestamp.","nullable":false},{"name":"window_end","type":"datetime","description":"Assessment period end timestamp.","nullable":false},{"name":"recommendations","type":"string","description":"Summary of key findings and recommendations.","nullable":true},{"name":"created_at","type":"datetime","description":"Assessment record creation timestamp (for audit).","nullable":false},{"name":"updated_at","type":"datetime","description":"Assessment record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for assessment record.","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","window_start","assessment_type"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"recommendations"}]},{"name":"healthcare_platform_legal_holds","description":"Captures legal/compliance holds placed on patient or organizational data for regulatory, investigational, or litigation reasons (e.g., eDiscovery, legal lock, audit). Records scope, subject(s), reason, method, effective and release dates, and status. Links to responsible organizational units or staff as needed. Each hold is independently tracked, auditable, and managed for duration and compliance review. Hold outcome/reviews stored separately.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"imposed_by_id","type":"uuid","description":"Staff/user who imposed the hold (@link healthcare_platform_user_org_assignments.id).","relation":{"name":"imposedBy","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true},{"name":"department_id","type":"uuid","description":"Department scope for the hold, if any (@link healthcare_platform_departments.id).","relation":{"name":"department","targetModel":"healthcare_platform_departments"},"unique":false,"nullable":true}],"plainFields":[{"name":"subject_type","type":"string","description":"Held subject type (e.g., patient_data, org_data, audit_trail, external_document).","nullable":false},{"name":"subject_id","type":"uuid","description":"Subject record/entity under legal hold (ID type varies by subject_type), enables external record linkage. Nullable if scope is broad.","nullable":true},{"name":"reason","type":"string","description":"Explicit hold reason/justification (required for compliance/audit).","nullable":false},{"name":"method","type":"string","description":"How the hold was imposed (e.g., system, legal request, investigation, manual).","nullable":false},{"name":"status","type":"string","description":"Hold status (e.g., active, released, denied, expired).","nullable":false},{"name":"effective_at","type":"datetime","description":"Datetime the hold was imposed/took effect.","nullable":false},{"name":"release_at","type":"datetime","description":"Datetime the hold was released or intended to be lifted; null if still active.","nullable":true},{"name":"created_at","type":"datetime","description":"Hold record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Hold record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for the hold record (never physical unless legal clearance).","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","subject_type","subject_id","effective_at"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"reason"}]},{"name":"healthcare_platform_compliance_reviews","description":"Records independent review outcomes and logs for legal holds or risk assessments. Each review is associated with a parent hold or risk assessment and documents reviewer, method, status, outcome, recommendations, timestamp, and comments. Used for compliance audit trail, but not independently managed outside parent workflow (subsidiary stance).","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Belonged organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false},{"name":"hold_id","type":"uuid","description":"Parent legal hold if review is for a hold, else null. {@link healthcare_platform_legal_holds.id}","relation":{"name":"legalHold","targetModel":"healthcare_platform_legal_holds"},"unique":false,"nullable":true},{"name":"risk_assessment_id","type":"uuid","description":"Parent risk assessment if review is for assessment, else null. {@link healthcare_platform_risk_assessments.id}","relation":{"name":"riskAssessment","targetModel":"healthcare_platform_risk_assessments"},"unique":false,"nullable":true},{"name":"reviewer_id","type":"uuid","description":"Responsible reviewer's {@link healthcare_platform_user_org_assignments.id}.","relation":{"name":"reviewer","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true}],"plainFields":[{"name":"review_type","type":"string","description":"Type of review (e.g., periodic, incident, escalation, external_audit).","nullable":false},{"name":"method","type":"string","description":"Review methodology or process (e.g., manual audit, compliance workflow, external review).","nullable":false},{"name":"status","type":"string","description":"Current review status (scheduled, in_progress, completed, approved, rejected, followup_required).","nullable":false},{"name":"outcome","type":"string","description":"Summary outcome or result (e.g., compliant, noncompliant, recommended_action).","nullable":true},{"name":"recommendations","type":"string","description":"Detailed reviewer recommendations or follow-up actions.","nullable":true},{"name":"reviewed_at","type":"datetime","description":"Review completion timestamp.","nullable":true},{"name":"comments","type":"string","description":"Reviewer notes or commentary.","nullable":true},{"name":"created_at","type":"datetime","description":"Review record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Review record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for the review record (audit recovery, not physical delete).","nullable":true}],"uniqueIndexes":[{"fieldNames":["organization_id","hold_id","risk_assessment_id","review_type","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["reviewer_id"]}],"ginIndexes":[{"fieldName":"outcome"}]}]},{"filename":"schema-09-audit_logs.prisma","namespace":"AuditLogs","models":[{"name":"healthcare_platform_audit_logs","description":"Comprehensive, immutable forensic record of all auditable user/system actions across the platform. Contains fine-grained details for access, modifications, privilege changes, and business logic triggers exclusively for internal and compliance review, supporting high-volume, append-only event storage. Used for full lifecycle audit, security investigation, and regulatory reporting. Foreign keys may reference users, roles, organizations as context.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Actor's {@link healthcare_platform_user_org_assignments.id} who triggered the event (nullable for system/anonymous actions).","relation":{"name":"user","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true},{"name":"organization_id","type":"uuid","description":"Organization context {@link healthcare_platform_organizations.id} where action occurred (nullable for global/system events).","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":true}],"plainFields":[{"name":"action_type","type":"string","description":"Type of action (e.g., 'LOGIN', 'RECORD_UPDATE', 'CONSENT_CHANGE', 'SECURITY_EVENT').","nullable":false},{"name":"event_context","type":"string","description":"Structured JSON or descriptive context for this event.","nullable":true},{"name":"ip_address","type":"string","description":"IP address associated with the event, for traceability.","nullable":true},{"name":"related_entity_type","type":"string","description":"Optional business entity type affected (e.g., 'PATIENT_RECORD', 'CONSENT', 'APPOINTMENT').","nullable":true},{"name":"related_entity_id","type":"uuid","description":"Optional business entity ID affected (matches the referenced entity UUID).","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp of audit log creation.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["user_id","created_at"]},{"fieldNames":["organization_id","created_at"]},{"fieldNames":["action_type","created_at"]}],"ginIndexes":[{"fieldName":"event_context"}]},{"name":"healthcare_platform_access_logs","description":"Detailed append-only record of user, staff, or system resource access events (read/view actions). Tracks access to patient records, EHR, and other sensitive data for HIPAA compliance and internal monitoring. Supports security analysis, breach detection, and data access reporting.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Actor's {@link healthcare_platform_user_org_assignments.id} initiating the access.","relation":{"name":"user","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":false},{"name":"organization_id","type":"uuid","description":"Organization whose data was accessed {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"resource_type","type":"string","description":"Type of resource accessed (e.g., 'EHR', 'PATIENT_RECORD', 'IMAGING', 'CONFIG').","nullable":false},{"name":"resource_id","type":"uuid","description":"Primary key of referenced resource (if applicable).","nullable":true},{"name":"access_purpose","type":"string","description":"Legal/business justification for access (role, consent, emergency, audit, etc.).","nullable":true},{"name":"ip_address","type":"string","description":"IP address of access event.","nullable":true},{"name":"created_at","type":"datetime","description":"Access timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["organization_id","resource_type","created_at"]},{"fieldNames":["user_id","created_at"]}],"ginIndexes":[]},{"name":"healthcare_platform_data_export_logs","description":"Append-only log recording every export/transfer of PHI or sensitive data (internal and external). Tracks the requesting user, justification, export type, size, and destination. Used for compliance, breach investigations, and regulatory reporting. Links to related organization/user for isolation and auditability.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Initiating user's {@link healthcare_platform_user_org_assignments.id} of export event.","relation":{"name":"user","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":false},{"name":"organization_id","type":"uuid","description":"Owning organization {@link healthcare_platform_organizations.id} of exported data.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"export_type","type":"string","description":"Nature of export (e.g., 'REPORT', 'EHR_BULK', 'DATA_DUMP').","nullable":false},{"name":"exported_data_scope","type":"string","description":"Description or scope of data exported (e.g., department, patient cohort, full org, resource class).","nullable":false},{"name":"justification","type":"string","description":"Business/legal justification (consent, audit, emergency, patient request, etc.).","nullable":false},{"name":"destination","type":"string","description":"Destination of export (e.g., 'USER_DOWNLOAD', 'EXTERNAL_API', 'PATIENT_PORTAL').","nullable":false},{"name":"file_uri","type":"uri","description":"If a file is produced, storage URI for post-facto retrieval or review.","nullable":true},{"name":"file_size","type":"double","description":"Size of exported file/data in bytes.","nullable":true},{"name":"status","type":"string","description":"Status tracking ('REQUESTED', 'IN_PROGRESS', 'COMPLETED', 'FAILED').","nullable":false},{"name":"created_at","type":"datetime","description":"Export log creation timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["organization_id","status","created_at"]}],"ginIndexes":[]},{"name":"healthcare_platform_security_incidents","description":"Logs production security violations, anomalies, and incident eventssuch as failed authentication, privileged misuse, policy breaches, and anomaly triggers. Includes incident status, summary/description, classification, and incident review/closure tracking. Supports compliance, forensic investigation, and escalation workflows.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"opened_by_user_id","type":"uuid","description":"User who reported or triggered the security incident event {@link healthcare_platform_user_org_assignments.id} (nullable for automated/system-detected).","relation":{"name":"openedByUser","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":true},{"name":"organization_id","type":"uuid","description":"Organization scope in which the incident occurred {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"incident_type","type":"string","description":"Classification of incident (e.g., 'FAILED_LOGIN', 'PHI_EXFIL', 'ROLE_ESCALATION', 'CONFIG_CHANGE', 'BREACH_SUSPECTED').","nullable":false},{"name":"summary","type":"string","description":"Brief summary/subject of incident.","nullable":false},{"name":"details","type":"string","description":"Optional extended incident description/context (redacted as needed for PHI compliance).","nullable":true},{"name":"status","type":"string","description":"Incident status (e.g., 'OPEN', 'INVESTIGATING', 'RESOLVED', 'ESCALATED', 'ARCHIVED').","nullable":false},{"name":"severity","type":"string","description":"Incident severity (e.g., 'LOW', 'MEDIUM', 'HIGH', 'CRITICAL').","nullable":false},{"name":"opened_at","type":"datetime","description":"Incident opened timestamp.","nullable":false},{"name":"closed_at","type":"datetime","description":"Incident closure time, if resolved.","nullable":true},{"name":"updated_at","type":"datetime","description":"When this incident record was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["organization_id","incident_type","opened_at"]},{"fieldNames":["status","severity","opened_at"]}],"ginIndexes":[{"fieldName":"details"}]},{"name":"healthcare_platform_emergency_access_overrides","description":"Audit log of all break-the-glass and emergency access overrides in the system. Tracks user identity, purpose/reason, access window, entities/data accessed, and post-event compliance review. Supports immediate compliance reporting, monitoring usages, and triggers mandatory post-incident investigation.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"User who performed the emergency override {'@link healthcare_platform_user_org_assignments.id'}.","relation":{"name":"user","targetModel":"healthcare_platform_user_org_assignments"},"unique":false,"nullable":false},{"name":"organization_id","type":"uuid","description":"Organization affected {'@link healthcare_platform_organizations.id'}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"reason","type":"string","description":"Business justification given for emergency override.","nullable":false},{"name":"override_scope","type":"string","description":"Data/entities accessed in this override (e.g., 'EHR_ALL', 'PATIENT_RECORD_123', 'SYSTEM_SETTINGS').","nullable":false},{"name":"override_start_at","type":"datetime","description":"When emergency override period commenced.","nullable":false},{"name":"override_end_at","type":"datetime","description":"When emergency override was revoked/expired (null if still open).","nullable":true},{"name":"reviewed_by_user_id","type":"uuid","description":"User responsible for compliance review after the override (nullable if not yet reviewed).","nullable":true},{"name":"reviewed_at","type":"datetime","description":"When review was performed.","nullable":true},{"name":"created_at","type":"datetime","description":"Recording timestamp for audit.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["organization_id","user_id","override_start_at"]}],"ginIndexes":[{"fieldName":"reason"}]},{"name":"healthcare_platform_audit_log_archives","description":"Tracks archive/retention management for log and audit tables (e.g., offsite storage, data cycling). Not directly queried except for system operations and external audits. Includes archive storage metadata and retention windows. Used when old logs are moved to cold storage for long-term regulatory compliance.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"organization_id","type":"uuid","description":"Owning organization {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":false}],"plainFields":[{"name":"archive_type","type":"string","description":"Which audit table this archive covers.","nullable":false},{"name":"archive_file_uri","type":"uri","description":"Storage location of archive in cold storage or offsite.","nullable":false},{"name":"retention_expiry_at","type":"datetime","description":"Date/time the archive can be scheduled for permanent deletion as per policy/law.","nullable":false},{"name":"created_at","type":"datetime","description":"Archive creation timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["organization_id","archive_type","created_at"]}],"ginIndexes":[]}]},{"filename":"schema-10-notifications.prisma","namespace":"Notifications","models":[{"name":"healthcare_platform_notifications","description":"Represents every notification event issued in the system (real-time, batch, or escalated). Stores business payload, delivery status, retry logic, type/channel, and criticality. Links to user/org as recipient, sender if applicable, and escalation record if triggered. Used for audit/compliance and notification search across all users and orgs.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"recipient_user_id","type":"uuid","description":"Recipient user's {@link healthcare_platform_patients.id} or equivalent user table from other components.","relation":{"name":"recipientUser","targetModel":"healthcare_platform_patients","mappingName":"healthcare_platform_notifications_of_recipient_user_id"},"unique":false,"nullable":true},{"name":"organization_id","type":"uuid","description":"Target organization's {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":true},{"name":"sender_user_id","type":"uuid","description":"Sender user's {@link healthcare_platform_patients.id} or appropriate user table.","relation":{"name":"senderUser","targetModel":"healthcare_platform_patients","mappingName":"healthcare_platform_notifications_of_sender_user_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"notification_type","type":"string","description":"Logical type/category (e.g., appointment_reminder, billing_alert, compliance_breach, escalation, info, marketing).","nullable":false},{"name":"notification_channel","type":"string","description":"Delivery channel (e.g., in_app, email, sms, push, phone_call, postal, fax).","nullable":false},{"name":"subject","type":"string","description":"Notification subject/title (for email/SMS/push display).","nullable":true},{"name":"body","type":"string","description":"Notification full body (text or HTML if channel supports).","nullable":false},{"name":"payload_link","type":"uri","description":"Link to related resource or call-to-action (e.g., portal URL, patient record).","nullable":true},{"name":"critical","type":"boolean","description":"Whether the notification is considered critical (SLA/incident/mandatory acknowledgement required).","nullable":false},{"name":"delivery_status","type":"string","description":"Current delivery status (pending, in_progress, delivered, failed, acknowledged, snoozed, escalated).","nullable":false},{"name":"delivery_attempts","type":"int","description":"How many times delivery was attempted.","nullable":false},{"name":"delivered_at","type":"datetime","description":"Time notification successfully delivered (null if never delivered).","nullable":true},{"name":"last_delivery_attempt_at","type":"datetime","description":"Timestamp of most recent delivery attempt.","nullable":true},{"name":"acknowledged_at","type":"datetime","description":"If present, recipient acknowledged notification at this time.","nullable":true},{"name":"snoozed_until","type":"datetime","description":"If snoozed, when notification will be re-tried.","nullable":true},{"name":"escalation_event_id","type":"uuid","description":"Associated escalation event, if triggered. {@link healthcare_platform_escalation_events.id}.","nullable":true},{"name":"created_at","type":"datetime","description":"Time notification was created in the system.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update time.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion marker.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["recipient_user_id","delivery_status"]},{"fieldNames":["organization_id","notification_type"]},{"fieldNames":["critical","delivery_status"]},{"fieldNames":["escalation_event_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"subject"},{"fieldName":"body"}]},{"name":"healthcare_platform_notification_preferences","description":"Stores notification delivery preferences for users, roles, or organizations. Allows opt-in/opt-out management per channel or notification type. May include snooze/mute/dnd windows and escalation handling policy. Used by core delivery logic and user/organization preference UIs.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"User that owns this preference set. {@link healthcare_platform_patients.id} or other user table as appropriate.","relation":{"name":"user","targetModel":"healthcare_platform_patients"},"unique":true,"nullable":false},{"name":"organization_id","type":"uuid","description":"Organization scope (for global or role-based prefs). {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":true}],"plainFields":[{"name":"notification_channel","type":"string","description":"Channel this preference applies to (email, sms, push, in_app, etc).","nullable":false},{"name":"notification_type","type":"string","description":"Applicable notification type/category (matches notification model).","nullable":false},{"name":"enabled","type":"boolean","description":"Whether this preference is enabled.","nullable":false},{"name":"mute_start","type":"datetime","description":"Mute window start (for DND configurations).","nullable":true},{"name":"mute_end","type":"datetime","description":"Mute window end (for DND configurations).","nullable":true},{"name":"escalation_policy","type":"string","description":"Policy for escalation when not acknowledged (e.g., escalate_after, escalate_to_role, escalate_immediate).","nullable":true},{"name":"created_at","type":"datetime","description":"Creation time.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update time.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete marker.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id","notification_channel","notification_type"],"unique":true}],"plainIndexes":[{"fieldNames":["organization_id"]}],"ginIndexes":[]},{"name":"healthcare_platform_notification_history","description":"Delivery outcome history for notificationseach record logs an attempt or event (delivered, failed, retried, bounced, acknowledged, snoozed, escalated) with full outcome metadata. Enables full audit/trace of notification lifecycle for compliance or troubleshooting.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"notification_id","type":"uuid","description":"Which notification this history refers to. {@link healthcare_platform_notifications.id}.","relation":{"name":"notification","targetModel":"healthcare_platform_notifications"},"unique":false,"nullable":false}],"plainFields":[{"name":"event_type","type":"string","description":"Delivery event type (delivered, failed, retried, acknowledged, snoozed, bounced, escalated).","nullable":false},{"name":"event_time","type":"datetime","description":"Timestamp of this event.","nullable":false},{"name":"delivery_channel","type":"string","description":"Channel used for this attempt/event.","nullable":false},{"name":"delivery_status","type":"string","description":"Delivery status after this event.","nullable":false},{"name":"details","type":"string","description":"Extended info or failure message, payload snapshot, or user agent, etc.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation time.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["notification_id","event_type"]},{"fieldNames":["event_time"]}],"ginIndexes":[{"fieldName":"details"}]},{"name":"healthcare_platform_escalation_events","description":"Records notification or SLA escalations for compliance, regulatory, or operational attention. Links to source notification, target/handler role/user, deadlines, outcome and final resolution. Exists independently as audit/compliance entity searchable by regulatory staff.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"source_notification_id","type":"uuid","description":"Source notification that triggered escalation. {@link healthcare_platform_notifications.id}.","relation":{"name":"sourceNotification","targetModel":"healthcare_platform_notifications"},"unique":false,"nullable":false},{"name":"target_user_id","type":"uuid","description":"User assigned to handle escalation. {@link healthcare_platform_patients.id} or role user.","relation":{"name":"targetUser","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":true},{"name":"target_role_id","type":"uuid","description":"If escalated to a role (compliance, orgAdmin, etc). {@link healthcare_platform_roles.id}.","relation":{"name":"targetRole","targetModel":"healthcare_platform_roles"},"unique":false,"nullable":true}],"plainFields":[{"name":"escalation_type","type":"string","description":"Reason/type for escalation (sla_violation, breach, compliance_required, ack_timeout, business_policy, system_alert).","nullable":false},{"name":"escalation_level","type":"string","description":"Severity/priority (normal, urgent, critical, info).","nullable":false},{"name":"deadline_at","type":"datetime","description":"Time by which action/acknowledgement is due.","nullable":false},{"name":"resolution_status","type":"string","description":"Resolution status (open, in_progress, resolved, expired, error, dismissed).","nullable":false},{"name":"resolution_time","type":"datetime","description":"When escalation was resolved/closed.","nullable":true},{"name":"resolution_notes","type":"string","description":"Human-entered disposition, root cause, or audit note.","nullable":true},{"name":"created_at","type":"datetime","description":"Record created at.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["source_notification_id"]},{"fieldNames":["target_user_id","resolution_status"]},{"fieldNames":["target_role_id","resolution_status"]},{"fieldNames":["deadline_at"]}],"ginIndexes":[{"fieldName":"resolution_notes"}]},{"name":"healthcare_platform_reminders","description":"Active and scheduled reminders for users (patients/staff) or system jobs. Tracks status, delivery schedule, target, message, and outcomes. Supports organization-level and user-level filtering, and is the source of appointment, medication, and compliance reminders.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"target_user_id","type":"uuid","description":"User to receive this reminder. {@link healthcare_platform_patients.id} or appropriate user entity.","relation":{"name":"targetUser","targetModel":"healthcare_platform_patients"},"unique":false,"nullable":true},{"name":"organization_id","type":"uuid","description":"Scope organization for the reminder. {@link healthcare_platform_organizations.id}.","relation":{"name":"organization","targetModel":"healthcare_platform_organizations"},"unique":false,"nullable":true}],"plainFields":[{"name":"reminder_type","type":"string","description":"Class/category (appointment, medication, task, compliance, followup, checkin, survey, job, etc).","nullable":false},{"name":"reminder_message","type":"string","description":"Reminder content payload (displayed to recipient, may be templated).","nullable":false},{"name":"scheduled_for","type":"datetime","description":"When this reminder is set to deliver.","nullable":false},{"name":"status","type":"string","description":"Current delivery status (pending, sent, snoozed, failed, acknowledged, expired, cancelled).","nullable":false},{"name":"delivered_at","type":"datetime","description":"If delivered, time of delivery.","nullable":true},{"name":"acknowledged_at","type":"datetime","description":"If acknowledged by user, time acknowledged.","nullable":true},{"name":"snoozed_until","type":"datetime","description":"If snoozed, when to re-deliver.","nullable":true},{"name":"failure_reason","type":"string","description":"If failed, why.","nullable":true},{"name":"created_at","type":"datetime","description":"Created at timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete marker.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["target_user_id","status"]},{"fieldNames":["organization_id"]},{"fieldNames":["scheduled_for"]}],"ginIndexes":[{"fieldName":"reminder_message"}]}]}]}
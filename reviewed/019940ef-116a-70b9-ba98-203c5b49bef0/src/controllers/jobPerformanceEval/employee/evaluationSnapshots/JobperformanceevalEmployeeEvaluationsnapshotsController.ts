import { Controller } from "@nestjs/common";
import { TypedRoute, TypedParam } from "@nestia/core";
import typia, { tags } from "typia";
import { getjobPerformanceEvalEmployeeEvaluationSnapshotsId } from "../../../../providers/getjobPerformanceEvalEmployeeEvaluationSnapshotsId";
import { EmployeeAuth } from "../../../../decorators/EmployeeAuth";
import { EmployeePayload } from "../../../../decorators/payload/EmployeePayload";

import { IJobPerformanceEvalEvaluationSnapshot } from "../../../../api/structures/IJobPerformanceEvalEvaluationSnapshot";

@Controller("/jobPerformanceEval/employee/evaluationSnapshots/:id")
export class JobperformanceevalEmployeeEvaluationsnapshotsController {
  /**
   * Retrieve a specific job performance evaluation snapshot by ID.
   *
   * Retrieve a detailed snapshot of job performance evaluation for a specific
   * evaluation record identified by its unique ID. This snapshot includes both
   * employee self-assessment and manager evaluation scores across multiple
   * categories such as work performance, knowledge/skills, problem-solving and
   * collaboration, and innovation.
   *
   * The operation retrieves data from the
   * job_performance_eval_evaluation_snapshots table, which serves as an
   * immutable historical record for evaluations conducted during specific
   * evaluation cycles. It includes timestamps and supports soft deletion for
   * logical record management.
   *
   * Security considerations require that only authorized users such as HR
   * personnel, managers, or administrators access this detailed data. Proper
   * validation of the snapshot ID is necessary to avoid invalid or unauthorized
   * data access.
   *
   * This operation returns the full detailed evaluation snapshot, useful for
   * report generation, historical analysis, and audit compliance. No request
   * body is required as this is a read-only GET operation. Errors such as not
   * found or unauthorized access should be handled at the application layer.
   *
   * @param connection
   * @param id Unique identifier of the evaluation snapshot to retrieve
   * @nestia Generated by Nestia - https://github.com/samchon/nestia
   */
  @TypedRoute.Get()
  public async at(
    @EmployeeAuth()
    employee: EmployeePayload,
    @TypedParam("id")
    id: string & tags.Format<"uuid">,
  ): Promise<IJobPerformanceEvalEvaluationSnapshot> {
    try {
      return await getjobPerformanceEvalEmployeeEvaluationSnapshotsId({
        employee,
        id,
      });
    } catch (error) {
      console.log(error);
      throw error;
    }
  }
}

import { Controller } from "@nestjs/common";
import { TypedRoute, TypedBody, TypedParam } from "@nestia/core";
import typia, { tags } from "typia";
import { postenterpriseLmsSystemAdminContentTags } from "../../../../providers/postenterpriseLmsSystemAdminContentTags";
import { SystemadminAuth } from "../../../../decorators/SystemadminAuth";
import { SystemadminPayload } from "../../../../decorators/payload/SystemadminPayload";
import { patchenterpriseLmsSystemAdminContentTags } from "../../../../providers/patchenterpriseLmsSystemAdminContentTags";
import { getenterpriseLmsSystemAdminContentTagsId } from "../../../../providers/getenterpriseLmsSystemAdminContentTagsId";
import { putenterpriseLmsSystemAdminContentTagsId } from "../../../../providers/putenterpriseLmsSystemAdminContentTagsId";
import { deleteenterpriseLmsSystemAdminContentTagsId } from "../../../../providers/deleteenterpriseLmsSystemAdminContentTagsId";

import { IEnterpriseLmsContentTag } from "../../../../api/structures/IEnterpriseLmsContentTag";
import { IPageIEnterpriseLmsContentTag } from "../../../../api/structures/IPageIEnterpriseLmsContentTag";

@Controller("/enterpriseLms/systemAdmin/contentTags")
export class EnterpriselmsSystemadminContenttagsController {
  /**
   * Create a new content tag for content classification within the enterprise
   * LMS.
   *
   * Security: Only users with roles organizationAdmin,
   * contentCreatorInstructor, or systemAdmin can create tags.
   *
   * Relationships: Tags are tenant specific and bound to the organization.
   *
   * Validation: The code and name must be unique and valid within the tenant.
   *
   * Behavior: Persists the new tag and returns the created entity.
   *
   * Related APIs: List tags, get tag details, update tags.
   *
   * Errors: Returns 400 for validation failures or duplicate codes.
   *
   * @param connection
   * @param body Content tag creation data
   * @nestia Generated by Nestia - https://github.com/samchon/nestia
   */
  @TypedRoute.Post()
  public async createContentTag(
    @SystemadminAuth()
    systemAdmin: SystemadminPayload,
    @TypedBody()
    body: IEnterpriseLmsContentTag.ICreate,
  ): Promise<IEnterpriseLmsContentTag> {
    try {
      return await postenterpriseLmsSystemAdminContentTags({
        systemAdmin,
        body,
      });
    } catch (error) {
      console.log(error);
      throw error;
    }
  }

  /**
   * Search and retrieve paginated list of content tags.
   *
   * Retrieve a paginated list of content tags used to classify content
   * materials. This list supports search, filtering, and sorting to enable
   * efficient content discovery and management.
   *
   * Security: Only users with roles organizationAdmin,
   * contentCreatorInstructor, or systemAdmin may access.
   *
   * Relationships: Tags are tenant specific, ensuring content classification
   * boundaries.
   *
   * Validation: The request body allows filtering by tag properties such as
   * code, name, and description.
   *
   * Behavior: Supports pagination and returns tag summaries for efficient
   * display.
   *
   * Related APIs: Get details of a specific tag, Create a new tag, Update an
   * existing tag.
   *
   * Errors: Returns 400 for invalid search parameters or pagination values.
   *
   * @param connection
   * @param body Filter and pagination parameters for content tags
   * @nestia Generated by Nestia - https://github.com/samchon/nestia
   */
  @TypedRoute.Patch()
  public async indexContentTag(
    @SystemadminAuth()
    systemAdmin: SystemadminPayload,
    @TypedBody()
    body: IEnterpriseLmsContentTag.IRequest,
  ): Promise<IPageIEnterpriseLmsContentTag.ISummary> {
    try {
      return await patchenterpriseLmsSystemAdminContentTags({
        systemAdmin,
        body,
      });
    } catch (error) {
      console.log(error);
      throw error;
    }
  }

  /**
   * Get details of a specific content tag.
   *
   * Retrieve detailed information about a specific content tag by its unique
   * identifier.
   *
   * Security: Restricted to users with roles organizationAdmin,
   * contentCreatorInstructor, or systemAdmin.
   *
   * Relationships: The content tag is tenant isolated to ensure data security
   * and privacy.
   *
   * Validation: The tag ID must be a valid UUID.
   *
   * Behavior: Returns the full content tag entity details for display or
   * editing.
   *
   * Related APIs: List content tags, create new tags, update existing tags.
   *
   * Errors: Returns 404 if tag not found, 403 for unauthorized access.
   *
   * @param connection
   * @param id Unique identifier of the content tag
   * @nestia Generated by Nestia - https://github.com/samchon/nestia
   */
  @TypedRoute.Get(":id")
  public async atContentTag(
    @SystemadminAuth()
    systemAdmin: SystemadminPayload,
    @TypedParam("id")
    id: string & tags.Format<"uuid">,
  ): Promise<IEnterpriseLmsContentTag> {
    try {
      return await getenterpriseLmsSystemAdminContentTagsId({
        systemAdmin,
        id,
      });
    } catch (error) {
      console.log(error);
      throw error;
    }
  }

  /**
   * Update content tag by ID.
   *
   * Update a content tag by its unique ID.
   *
   * This operation modifies the tag's identifying code, name, and optional
   * description within the content management system.
   *
   * Security and authorization are enforced to allow only system administrators
   * to perform this update operation.
   *
   * The operation aligns with the enterprise_lms_content_tags table structure
   * in the Prisma schema, ensuring data integrity and validation.
   *
   * Errors returned may include invalid UUID format, uniqueness violations of
   * the code, or unauthorized access attempts.
   *
   * @param connection
   * @param id Unique identifier of the content tag to update
   * @param body Update information for the content tag
   * @nestia Generated by Nestia - https://github.com/samchon/nestia
   */
  @TypedRoute.Put(":id")
  public async update(
    @SystemadminAuth()
    systemAdmin: SystemadminPayload,
    @TypedParam("id")
    id: string & tags.Format<"uuid">,
    @TypedBody()
    body: IEnterpriseLmsContentTag.IUpdate,
  ): Promise<IEnterpriseLmsContentTag> {
    try {
      return await putenterpriseLmsSystemAdminContentTagsId({
        systemAdmin,
        id,
        body,
      });
    } catch (error) {
      console.log(error);
      throw error;
    }
  }

  /**
   * Delete content tag by ID.
   *
   * Delete a content tag by its unique ID.
   *
   * This operation performs a permanent hard delete of the specified content
   * tag from the system.
   *
   * Restricted to system administrators for security and governance purposes.
   *
   * Clients should ensure the tag is not referenced by other entities before
   * deletion to avoid referential integrity issues.
   *
   * Errors may occur if the tag does not exist or if dependencies prevent
   * deletion.
   *
   * @param connection
   * @param id Unique identifier of the content tag to delete
   * @nestia Generated by Nestia - https://github.com/samchon/nestia
   */
  @TypedRoute.Delete(":id")
  public async erase(
    @SystemadminAuth()
    systemAdmin: SystemadminPayload,
    @TypedParam("id")
    id: string & tags.Format<"uuid">,
  ): Promise<void> {
    try {
      return await deleteenterpriseLmsSystemAdminContentTagsId({
        systemAdmin,
        id,
      });
    } catch (error) {
      console.log(error);
      throw error;
    }
  }
}

{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"chat_app_authentication_sessions","description":"Authentication sessions data for users logged in via Snapchat social login, storing access and refresh tokens securely along with expiration timestamps and session metadata. This table supports secure, token-based OAuth2 authentication lifecycle management and session revocation. References the regular user in chat_app_regular_users. Implements soft delete functionality with deleted_at for session revocation tracking and audit purposes. Includes indexes to enforce unique active tokens per user and optimize query performance by user and expiration.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"chat_app_regular_user_id","type":"uuid","description":"Belonged user's {@link chat_app_regular_users.id}.","relation":{"name":"user","targetModel":"chat_app_regular_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"access_token","type":"string","nullable":false,"description":"OAuth2 access token string provided by Snapchat for authentication."},{"name":"refresh_token","type":"string","nullable":false,"description":"OAuth2 refresh token string to obtain new access tokens."},{"name":"expires_at","type":"datetime","nullable":false,"description":"Timestamp when the access token expires."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last update timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft delete timestamp indicating revocation or expiry."}],"uniqueIndexes":[{"fieldNames":["access_token"],"unique":true}],"plainIndexes":[{"fieldNames":["chat_app_regular_user_id","expires_at"]}],"ginIndexes":[]},{"name":"chat_app_notifications","description":"Notification records for all system messages related to chat application users. Includes notification type, association to target user and message, read status, and timestamps for creation and updates. Enables system-wide prompt communication to users regarding new messages or system events. Supports marking notifications as read and soft deletion for historical audit and recovery.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"chat_app_regular_user_id","type":"uuid","description":"Target user's {@link chat_app_regular_users.id} who will receive the notification.","relation":{"name":"user","targetModel":"chat_app_regular_users"},"unique":false,"nullable":false},{"name":"chat_app_message_id","type":"uuid","description":"Associated message's {@link chat_app_messages.id} triggering this notification.","relation":{"name":"message","targetModel":"chat_app_messages"},"unique":false,"nullable":false}],"plainFields":[{"name":"notification_type","type":"string","nullable":false,"description":"Type/category of the notification, e.g., 'message_received', 'group_invite'."},{"name":"is_read","type":"boolean","nullable":false,"description":"Flag indicating whether the user has read the notification."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last update timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft delete timestamp for notification archival or removal."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["chat_app_regular_user_id","is_read"]},{"fieldNames":["chat_app_message_id"]}],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"chat_app_regular_users","description":"Core entity representing regular users who authenticate primarily via Snapchat social login. Stores key user identity and authentication-related information. This model maintains user authentication state and supports the social login mechanism for regular users. Auditing fields track creation and update timestamps.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"social_login_id","type":"string","nullable":false,"description":"Unique identifier provided by Snapchat for social login authentication."},{"name":"nickname","type":"string","nullable":false,"description":"User's display name or nickname."},{"name":"profile_image_uri","type":"uri","nullable":true,"description":"Optional user profile image URL."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the user record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the user record was last updated."}],"uniqueIndexes":[{"fieldNames":["social_login_id"],"unique":true}],"plainIndexes":[{"fieldNames":["nickname","created_at"]}],"ginIndexes":[{"fieldName":"nickname"}]}]},{"filename":"schema-03-groups.prisma","namespace":"Groups","models":[{"name":"chat_app_groups","description":"Community groups in the chatting application. Represents a group entity that users can create, join, and manage. Contains group metadata including unique name, description, and status fields. Groups are independently managed core business entities with lifecycle states and soft deletion support. Related to group memberships via chat_app_group_memberships. Enables group admins to organize and control membership and group settings.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Unique name of the community group, used for identification and display."},{"name":"description","type":"string","nullable":true,"description":"Optional detailed description of the community group."},{"name":"status","type":"string","nullable":false,"description":"Current status of the group for workflow management, e.g., 'active', 'inactive', 'archived'."},{"name":"business_status","type":"string","nullable":true,"description":"Additional business-specific status information, optional."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the group was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the group was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp for soft deletion of the group; null if not deleted."}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["status","business_status"]}],"ginIndexes":[]},{"name":"chat_app_group_memberships","description":"Memberships represent the association between users and community groups in the chatting application. Stores membership roles (e.g., member, admin), join timestamps, and membership lifecycle status including soft delete. Membership entities ensure proper role-based access control within groups and facilitate management operations by group admins. Each membership links a user and a group with unique constraints to prevent duplicate memberships.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"chat_app_group_id","type":"uuid","description":"Belonged community group's chat_app_groups.id.","relation":{"name":"group","targetModel":"chat_app_groups"},"unique":false,"nullable":false},{"name":"chat_app_regular_user_id","type":"uuid","description":"Belonged regular user's chat_app_regular_users.id.","relation":{"name":"member","targetModel":"chat_app_regular_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"role","type":"string","nullable":false,"description":"Role of the member within the group, e.g., 'member', 'admin'."},{"name":"joined_at","type":"datetime","nullable":false,"description":"Timestamp when the user joined the group."},{"name":"status","type":"string","nullable":false,"description":"Current membership status, e.g., 'active', 'banned', 'pending'."},{"name":"business_status","type":"string","nullable":true,"description":"Additional business-specific membership status, optional."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when membership record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when membership record was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp for soft deletion of the membership; null if not deleted."}],"uniqueIndexes":[{"fieldNames":["chat_app_group_id","chat_app_regular_user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["role","status","business_status"]}],"ginIndexes":[]}]},{"filename":"schema-04-messaging.prisma","namespace":"Messaging","models":[{"name":"chat_app_messages","description":"Chat messages sent by users, representing individual pieces of communication in one-on-one or group chats. Each message is associated with either a sender, a target group or target user, with timestamps for creation and update. Soft deletable for audit and compliance. Integrates with media attachments and notifications.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"sender_id","type":"uuid","description":"Sender user's chat_app_regular_users.id.","relation":{"name":"sender","targetModel":"chat_app_regular_users","mappingName":"chat_app_messages_of_sender_id"},"unique":false,"nullable":false},{"name":"group_id","type":"uuid","description":"Target group chat_app_groups.id. Nullable for one-on-one chats.","relation":{"name":"group","targetModel":"chat_app_groups"},"unique":false,"nullable":true},{"name":"recipient_id","type":"uuid","description":"Recipient user for one-on-one chats, chat_app_regular_users.id. Nullable because either group or recipient is required.","relation":{"name":"recipient","targetModel":"chat_app_regular_users","mappingName":"chat_app_messages_of_recipient_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"content","type":"string","description":"Text content of the message.","nullable":false},{"name":"message_type","type":"string","description":"Type of the message content: 'text', 'image', or 'video'.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when message was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when message was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp. If set, message is considered deleted.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["sender_id","created_at"]},{"fieldNames":["group_id","created_at"]},{"fieldNames":["recipient_id","created_at"]}],"ginIndexes":[{"fieldName":"content"}]},{"name":"chat_app_media_attachments","description":"Media files attached to chat messages supporting images and videos. Linked to messages and stored with metadata including file URI, type, and timestamps. Supports audit with creation timestamps and soft deletion for compliance.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"message_id","type":"uuid","description":"Associated message chat_app_messages.id.","relation":{"name":"message","targetModel":"chat_app_messages"},"unique":false,"nullable":false}],"plainFields":[{"name":"media_type","type":"string","description":"Type of media: 'image' or 'video'.","nullable":false},{"name":"uri","type":"uri","description":"URI of the media file stored in the system.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the media was uploaded.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp. If set, media is considered deleted.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["message_id"]}],"ginIndexes":[]}]}]}